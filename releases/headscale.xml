<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
  <id>https://selfh.st/apps</id>
  <title>Headscale Releases</title>
  <updated>2025-07-16T03:30:59.434946-04:00</updated>
  <author>
    <name>selfh.st</name>
    <email>contact@selfh.st</email>
  </author>
  <link href="https://selfh.st/apps" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <subtitle>Self-hosted software releases generated by selfh.st</subtitle>
  <entry>
    <id>https://github.com/juanfont/headscale/releases/tag/v0.24.3</id>
    <title>New release for Headscale: v0.24.3</title>
    <updated>2025-02-07T05:35:20-05:00</updated>
    <author>
      <name>juanfont/headscale</name>
    </author>
    <content>&lt;h3&gt;Changes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Fix migration error caused by nodes having invalid auth keys
  &lt;a href="https://github.com/juanfont/headscale/pull/2412"&gt;#2412&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Pre auth keys belonging to a user are no longer deleted with the user
  &lt;a href="https://github.com/juanfont/headscale/pull/2396"&gt;#2396&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Pre auth keys that are used by a node can no longer be deleted
  &lt;a href="https://github.com/juanfont/headscale/pull/2396"&gt;#2396&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Changelog&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ffe2f299cb02588a8425753c8b10f57b36726ed1 do not allow preauth keys to be deleted if assigned to node (#2396)&lt;/li&gt;
&lt;li&gt;3b55dacda108da89011910d47bd913135683214c hscontrol/db: add migration setting non existing pak on nodes to null (#2412)&lt;/li&gt;
&lt;li&gt;1e2419bc032e9a8bf227eda2c9443c7926104d5c update changelog&lt;/li&gt;
&lt;/ul&gt;</content>
    <link href="https://github.com/juanfont/headscale/releases/tag/v0.24.3" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/juanfont/headscale/releases/tag/v0.25.0</id>
    <title>New release for Headscale: v0.25.0</title>
    <updated>2025-02-11T07:16:41-05:00</updated>
    <author>
      <name>juanfont/headscale</name>
    </author>
    <content>&lt;h3&gt;BREAKING&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Authentication flow has been rewritten
  &lt;a href="https://github.com/juanfont/headscale/pull/2374"&gt;#2374&lt;/a&gt; This change should be
  transparent to users with the exception of some buxfixes that has been
  discovered and was fixed as part of the rewrite.&lt;/li&gt;
&lt;li&gt;When a node is registered with &lt;em&gt;a new user&lt;/em&gt;, it will be registered as a new
    node (&lt;a href="https://github.com/juanfont/headscale/issues/2327"&gt;#2327&lt;/a&gt; and
    &lt;a href="https://github.com/juanfont/headscale/issues/1310"&gt;#1310&lt;/a&gt;).&lt;/li&gt;
&lt;li&gt;A logged out node logging in with the same user will replace the existing
    node.&lt;/li&gt;
&lt;li&gt;Remove support for Tailscale clients older than 1.62 (Capability version 87)
      &lt;a href="https://github.com/juanfont/headscale/pull/2405"&gt;#2405&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Changes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;oidc.map_legacy_users&lt;/code&gt; is now &lt;code&gt;false&lt;/code&gt; by default
  &lt;a href="https://github.com/juanfont/headscale/pull/2350"&gt;#2350&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Print Tailscale version instead of capability versions for outdated nodes
  &lt;a href="https://github.com/juanfont/headscale/pull/2391"&gt;#2391&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Do not allow renaming of users from OIDC
  &lt;a href="https://github.com/juanfont/headscale/pull/2393"&gt;#2393&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Change minimum hostname length to 2
  &lt;a href="https://github.com/juanfont/headscale/pull/2393"&gt;#2393&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Fix migration error caused by nodes having invalid auth keys
  &lt;a href="https://github.com/juanfont/headscale/pull/2412"&gt;#2412&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Pre auth keys belonging to a user are no longer deleted with the user
  &lt;a href="https://github.com/juanfont/headscale/pull/2396"&gt;#2396&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Pre auth keys that are used by a node can no longer be deleted
  &lt;a href="https://github.com/juanfont/headscale/pull/2396"&gt;#2396&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Rehaul HTTP errors, return better status code and errors to users
  &lt;a href="https://github.com/juanfont/headscale/pull/2398"&gt;#2398&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Changelog&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;d5037c25a6a663cc908e5eba65a0f24e240d3d9a date in changelog&lt;/li&gt;
&lt;/ul&gt;</content>
    <link href="https://github.com/juanfont/headscale/releases/tag/v0.25.0" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/juanfont/headscale/releases/tag/v0.25.1</id>
    <title>New release for Headscale: v0.25.1</title>
    <updated>2025-02-25T12:30:48-05:00</updated>
    <author>
      <name>juanfont/headscale</name>
    </author>
    <content>&lt;h3&gt;Changes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Fix issue where registration errors are sent correctly
  &lt;a href="https://github.com/juanfont/headscale/pull/2435"&gt;#2435&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Fix issue where routes passed on registration were not saved
  &lt;a href="https://github.com/juanfont/headscale/pull/2444"&gt;#2444&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Fix issue where registration page was displayed twice
  &lt;a href="https://github.com/juanfont/headscale/pull/2445"&gt;#2445&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Changelog&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ade7f2a2b1795768ce146913e25011cd11a1a012 changelog 0.25.1&lt;/li&gt;
&lt;li&gt;75c1e77de031bd6fecab495824ace891080876e4 fix double login URL with OIDC (#2445)&lt;/li&gt;
&lt;li&gt;83587df738ff040d6767e690affde05cb236a5a2 fix routes not being saved when new nodes registers (#2444)&lt;/li&gt;
&lt;li&gt;e9bcb7a052d6c06cf3e04708ec7ce9eb3f2389c1 handle register auth errors (#2435)&lt;/li&gt;
&lt;/ul&gt;</content>
    <link href="https://github.com/juanfont/headscale/releases/tag/v0.25.1" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/juanfont/headscale/releases/tag/v0.26.0</id>
    <title>New release for Headscale: v0.26.0</title>
    <updated>2025-05-14T11:12:14-04:00</updated>
    <author>
      <name>juanfont/headscale</name>
    </author>
    <content>&lt;h2&gt;BREAKING&lt;/h2&gt;
&lt;h3&gt;Routes&lt;/h3&gt;
&lt;p&gt;Route internals have been rewritten, removing the dedicated route table in the
database. This was done to simplify the codebase, which had grown unnecessarily
complex after the routes were split into separate tables. The overhead of having
to go via the database and keeping the state in sync made the code very hard to
reason about and prone to errors. The majority of the route state is only
relevant when headscale is running, and is now only kept in memory. As part of
this, the CLI and API has been simplified to reflect the changes;&lt;/p&gt;
&lt;p&gt;```console
$ headscale nodes list-routes
ID | Hostname           | Approved | Available       | Serving (Primary)
1  | ts-head-ruqsg8     |          | 0.0.0.0/0, ::/0 |
2  | ts-unstable-fq7ob4 |          | 0.0.0.0/0, ::/0 |&lt;/p&gt;
&lt;p&gt;$ headscale nodes approve-routes --identifier 1 --routes 0.0.0.0/0,::/0
Node updated&lt;/p&gt;
&lt;p&gt;$ headscale nodes list-routes
ID | Hostname           | Approved        | Available       | Serving (Primary)
1  | ts-head-ruqsg8     | 0.0.0.0/0, ::/0 | 0.0.0.0/0, ::/0 | 0.0.0.0/0, ::/0
2  | ts-unstable-fq7ob4 |                 | 0.0.0.0/0, ::/0 |
```&lt;/p&gt;
&lt;p&gt;Note that if an exit route is approved (0.0.0.0/0 or ::/0), both IPv4 and IPv6
will be approved.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Route API and CLI has been removed
  &lt;a href="https://github.com/juanfont/headscale/pull/2422"&gt;#2422&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Routes are now managed via the Node API
  &lt;a href="https://github.com/juanfont/headscale/pull/2422"&gt;#2422&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Only routes accessible to the node will be sent to the node
  &lt;a href="https://github.com/juanfont/headscale/pull/2561"&gt;#2561&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Policy v2&lt;/h3&gt;
&lt;p&gt;This release introduces a new policy implementation. The new policy is a
complete rewrite, and it introduces some significant quality and consistency
improvements. In principle, there are not really any new features, but some long
standing bugs should have been resolved, or be easier to fix in the future. The
new policy code passes all of our tests.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Changes&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The policy is validated and "resolved" when loading, providing errors for
  invalid rules and conditions.&lt;/li&gt;
&lt;li&gt;Previously this was done as a mix between load and runtime (when it was
    applied to a node).&lt;/li&gt;
&lt;li&gt;This means that when you convert the first time, what was previously a
    policy that loaded, but failed at runtime, will now fail at load time.&lt;/li&gt;
&lt;li&gt;Error messages should be more descriptive and informative.&lt;/li&gt;
&lt;li&gt;There is still work to be here, but it is already improved with "typing"
    (e.g. only Users can be put in Groups)&lt;/li&gt;
&lt;li&gt;All users must contain an &lt;code&gt;@&lt;/code&gt; character.&lt;/li&gt;
&lt;li&gt;If your user naturally contains and &lt;code&gt;@&lt;/code&gt;, like an email, this will just work.&lt;/li&gt;
&lt;li&gt;If its based on usernames, or other identifiers not containing an &lt;code&gt;@&lt;/code&gt;, an
    &lt;code&gt;@&lt;/code&gt; should be appended at the end. For example, if your user is &lt;code&gt;john&lt;/code&gt;, it
    must be written as &lt;code&gt;john@&lt;/code&gt; in the policy.&lt;/li&gt;
&lt;/ul&gt;
&lt;details&gt;

&lt;summary&gt;Migration notes when the policy is stored in the database.&lt;/summary&gt;

This section **only** applies if the policy is stored in the database and
Headscale 0.26 doesn't start due to a policy error
(`failed to load ACL policy`).

- Start Headscale 0.26 with the environment variable `HEADSCALE_POLICY_V1=1`
  set. You can check that Headscale picked up the environment variable by
  observing this message during startup: `Using policy manager version: 1`
- Dump the policy to a file: `headscale policy get &gt; policy.json`
- Edit `policy.json` and migrate to policy V2. Use the command
  `headscale policy check --file policy.json` to check for policy errors.
- Load the modified policy: `headscale policy set --file policy.json`
- Restart Headscale **without** the environment variable `HEADSCALE_POLICY_V1`.
  Headscale should now print the message `Using policy manager version: 2` and
  startup successfully.

&lt;/details&gt;

&lt;p&gt;&lt;strong&gt;SSH&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The SSH policy has been reworked to be more consistent with the rest of the
policy. In addition, several inconsistencies between our implementation and
Tailscale's upstream has been closed and this might be a breaking change for
some users. Please refer to the
&lt;a href="https://tailscale.com/kb/1337/acl-syntax#tailscale-ssh"&gt;upstream documentation&lt;/a&gt;
for more information on which types are allowed in &lt;code&gt;src&lt;/code&gt;, &lt;code&gt;dst&lt;/code&gt; and &lt;code&gt;users&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;There is one large inconsistency left, we allow &lt;code&gt;*&lt;/code&gt; as a destination as we
currently do not support &lt;code&gt;autogroup:self&lt;/code&gt;, &lt;code&gt;autogroup:member&lt;/code&gt; and
&lt;code&gt;autogroup:tagged&lt;/code&gt;. The support for &lt;code&gt;*&lt;/code&gt; will be removed when we have support for
the autogroups.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Current state&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The new policy is passing all tests, both integration and unit tests. This does
not mean it is perfect, but it is a good start. Corner cases that is currently
working in v1 and not tested might be broken in v2 (and vice versa).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;We do need help testing this code&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;Other breaking changes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Disallow &lt;code&gt;server_url&lt;/code&gt; and &lt;code&gt;base_domain&lt;/code&gt; to be equal
  &lt;a href="https://github.com/juanfont/headscale/pull/2544"&gt;#2544&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Return full user in API for pre auth keys instead of string
  &lt;a href="https://github.com/juanfont/headscale/pull/2542"&gt;#2542&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Pre auth key API/CLI now uses ID over username
  &lt;a href="https://github.com/juanfont/headscale/pull/2542"&gt;#2542&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Changes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Use Go 1.24 &lt;a href="https://github.com/juanfont/headscale/pull/2427"&gt;#2427&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Add &lt;code&gt;headscale policy check&lt;/code&gt; command to check policy
  &lt;a href="https://github.com/juanfont/headscale/pull/2553"&gt;#2553&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;oidc.map_legacy_users&lt;/code&gt; and &lt;code&gt;oidc.strip_email_domain&lt;/code&gt; has been removed
  &lt;a href="https://github.com/juanfont/headscale/pull/2411"&gt;#2411&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Add more information to &lt;code&gt;/debug&lt;/code&gt; endpoint
  &lt;a href="https://github.com/juanfont/headscale/pull/2420"&gt;#2420&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;It is now possible to inspect running goroutines and take profiles&lt;/li&gt;
&lt;li&gt;View of config, policy, filter, ssh policy per node, connected nodes and
    DERPmap&lt;/li&gt;
&lt;li&gt;OIDC: Fetch UserInfo to get EmailVerified if necessary
  &lt;a href="https://github.com/juanfont/headscale/pull/2493"&gt;#2493&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;If a OIDC provider doesn't include the &lt;code&gt;email_verified&lt;/code&gt; claim in its ID
    tokens, Headscale will attempt to get it from the UserInfo endpoint.&lt;/li&gt;
&lt;li&gt;OIDC: Try to populate name, email and username from UserInfo
  &lt;a href="https://github.com/juanfont/headscale/pull/2545"&gt;#2545&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Improve performance by only querying relevant nodes from the database for node
  updates &lt;a href="https://github.com/juanfont/headscale/pull/2509"&gt;#2509&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;node FQDNs in the netmap will now contain a dot (".") at the end. This aligns
  with behaviour of tailscale.com
  &lt;a href="https://github.com/juanfont/headscale/pull/2503"&gt;#2503&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Restore support for "Override local DNS"
  &lt;a href="https://github.com/juanfont/headscale/pull/2438"&gt;#2438&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Add documentation for routes
  &lt;a href="https://github.com/juanfont/headscale/pull/2496"&gt;#2496&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Changelog&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;8c7e65061649c62a5323ad13d6067daa4e34734b Remove map_legacy_users from example configuration (#2590)&lt;/li&gt;
&lt;li&gt;d7a503a34effa188e9bb27cb6b0fad2002112fb0 changelog: entry for 0.26 (#2594)&lt;/li&gt;
&lt;li&gt;62b489dc686c090a025329673c67e28f441d14e1 fix: change FormatUint base from 64 to 10 in preauthkeys list command (#2588)&lt;/li&gt;
&lt;li&gt;2dc2f3b3f0e0efcb5257379dec7ad1b4b09f8945 users: harden, test, and add cleaner of identifier (#2593)&lt;/li&gt;
&lt;/ul&gt;</content>
    <link href="https://github.com/juanfont/headscale/releases/tag/v0.26.0" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/juanfont/headscale/releases/tag/v0.26.1</id>
    <title>New release for Headscale: v0.26.1</title>
    <updated>2025-06-06T07:22:02-04:00</updated>
    <author>
      <name>juanfont/headscale</name>
    </author>
    <content>&lt;h2&gt;Security fix&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Ensure nodes are matching both node key and machine key
  when connecting.
  &lt;a href="https://github.com/juanfont/headscale/pull/2642"&gt;#2642&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Commits&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;474ea236d0c6d393dbcf7baa98da240ad20c1b66 Fix &lt;code&gt;/machine/map&lt;/code&gt; endpoint vulnerability (#2642)&lt;/li&gt;
&lt;/ul&gt;</content>
    <link href="https://github.com/juanfont/headscale/releases/tag/v0.26.1" rel="alternate"/>
  </entry>
</feed>
