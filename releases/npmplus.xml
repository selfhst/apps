<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
  <id>https://selfh.st/apps</id>
  <title>NPMplus Releases</title>
  <updated>2025-01-11T14:33:15.896924-05:00</updated>
  <author>
    <name>selfh.st</name>
    <email>contact@selfh.st</email>
  </author>
  <link href="https://selfh.st/apps" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <subtitle>Self-hosted software releases generated by selfh.st</subtitle>
  <entry>
    <id>https://github.com/ZoeyVid/NPMplus/releases/tag/ocsp-stapling-must-staple</id>
    <title>New release for NPMplus: Important information about Certificates/CAs/OCSP Must-Staple</title>
    <updated>2024-12-05T17:01:55-05:00</updated>
    <author>
      <name>ZoeyVid/NPMplus</name>
    </author>
    <content>&lt;h2&gt;Note: This is not a new release but an important information&lt;/h2&gt;
&lt;p&gt;Let's Encrypt has made an announcement today which has a huge impact on NPMplus, you can read it here: https://letsencrypt.org/2024/12/05/ending-ocsp &lt;br&gt;
If you have any question/ideas etc. on this topic, please write a comment&lt;/p&gt;
&lt;h2&gt;What is OCSP/CRLs?&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;first: OCSP, OCSP Stapling and OCSP Must-Staple are different things.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;### OCSP:
 - With OCSP the client (Browser), asks the CA (Let's Encrypt) if the Certificate used by the web server was revoked
 - This is a check done between CA and Client, NPMplus has no influence on this
 - Revocation will be detected by the client if the client (re)checks for it (recheck because of cache which could exist)
 - privacy problems since the CA knows things which it should not (can be disabled in Firefox/thunderbird settings, not sure about other clients, chrome doesn't even support this)
 &lt;strong&gt;=&amp;gt; useful, but with a privacy problem, maybe takes some time to be detected because of cache&lt;/strong&gt;
 - https://en.wikipedia.org/wiki/Online_Certificate_Status_Protocol&lt;/p&gt;
&lt;h3&gt;OCSP Stapling &lt;strong&gt;without&lt;/strong&gt; Must-Staple:&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;your 30 days cert is valid on its own, but it is additionally verified by a “second certificate”&lt;/li&gt;
&lt;li&gt;always enabled for all certbot certs of NPMplus (also for migrated instances and also if you disable must-staple)&lt;/li&gt;
&lt;li&gt;the “second certificate” is valid only for 7 days&lt;/li&gt;
&lt;li&gt;the “second certificate” is requested by the web server from the CA (since nginx implementation is not the best, NPMplus uses &lt;a href="https://github.com/tomwassenberg/certbot-ocsp-fetcher"&gt;certbot-ocsp-fetcher&lt;/a&gt; for this)&lt;/li&gt;
&lt;li&gt;no privacy problem since browser only talks to the web sever and not to the CA&lt;/li&gt;
&lt;li&gt;BUT: if the cert is compromised, the cert can still be used &lt;strong&gt;WITHOUT&lt;/strong&gt; OCSP Stapling and through that revocation is not be detected by the client (if the client doesn't detect trough other ways client-CA OSCP/CRLs)
 &lt;strong&gt;=&amp;gt; useless without must staple, see below&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/OCSP_stapling&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;OCSP Stapling &lt;strong&gt;with&lt;/strong&gt; Must-Staple:&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;same as above, but your 30 days cert is &lt;strong&gt;NOT&lt;/strong&gt; valid on its own, it &lt;strong&gt;needs&lt;/strong&gt; a “second certificate” to be valid&lt;/li&gt;
&lt;li&gt;this requirement is part of the cert itself (so not removable) and added while creating the cert (must-staple requirement is enabled by default with NPMplus for all certbot certs, but can be disabled via ENV)&lt;/li&gt;
&lt;li&gt;Revocation will be detected as soon as the “second certificate” expires and if the client support must-staple
 &lt;strong&gt;=&amp;gt; useful, if supported by the client, maybe takes some time to be detected because of validity of “second certificate”&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/OCSP_stapling&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;CRLs&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;the older technology to detect revocation&lt;/li&gt;
&lt;li&gt;CAs publish huge lists containing information about all revoked (and by date still valid) certificates and chrome/Firefox/thunderbird download collections of these lists&lt;/li&gt;
&lt;li&gt;Problem: because of size, lists may not contain all revoked certs
 &lt;strong&gt;=&amp;gt; depends: if the revocation information of your cert is not included, then it is useless, otherwise it is ok&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;https://en.wikipedia.org/wiki/Certificate_revocation_list&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;My opinion on this (I mostly talk about Must-Staple)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;first I understand that they remove OCSP because of the costs they have through it and because of the privacy concern&lt;/li&gt;
&lt;li&gt;BUT I don't understand that they remove Must-Staple support, it is better then CRL&lt;/li&gt;
&lt;li&gt;They argue that most web servers have no good implementation for this, which is not fully true, like caddy which has good support for this or NPMplus itself through the certbot-ocsp-fetcher script ((free)nginx own implementation is not the best) ⇒ I don't think that this argument is big enough to revert to CRLs&lt;/li&gt;
&lt;li&gt;The argument with the client is &lt;em&gt;sadly&lt;/em&gt; true, since &lt;a href="https://issues.chromium.org/issues/41230705"&gt;chrome (and it forks) doesn't support must-staple&lt;/a&gt;, so the only big clients remaining are Firefox/thunderbird (not sure about WebKit/safari and other big mail clients like outlook)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;What now?&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;I must say, there is no good solution:&lt;/li&gt;
&lt;li&gt;Moving to ZeroSSL would be an option, but they have no CRLs support, which is important for chromium (and forks)&lt;/li&gt;
&lt;li&gt;Staying with Let's Encrypt would mean to lose Must Staple functionality&lt;/li&gt;
&lt;li&gt;But since a decision needs to be made and chrome is very important, &lt;strong&gt;I will stay with Let's Encrypt by default and instead change the default value of ACME_MUST_STAPLE&lt;/strong&gt;, maybe stapling needs to be fully removed even if your custom CA supports it, but I will try to find a way to prevent this&lt;/li&gt;
&lt;li&gt;If ZeroSSL or any other public ACME supporting CA will have support for OCSP Stapling/Must-Staple and CRLs, then this will become the new default CA
 ### When will the change happen?&lt;/li&gt;
&lt;li&gt;Before January 30, 2025 (the day Must-Staple will stop working for new instances)&lt;/li&gt;
&lt;li&gt;I have no date exactly, but I will try to have some releases until this change:&lt;/li&gt;
&lt;li&gt;at least on release mentioning this change in its changelog, in a few days&lt;/li&gt;
&lt;li&gt;in between (or maybe with the next release), I will sync the value of ACME_MUST_STAPLE with all renewal configs of certbot cert to make sure that certs which get renewed will have the same setting as the env (maybe I will also sync the ACME_SERVER env)&lt;/li&gt;
&lt;li&gt;and at some point ACME_MUST_STAPLE will be changed to false by default (and stapling may be removed) - maybe still in December&lt;/li&gt;
&lt;li&gt;ENVs set by you will not be overridden&lt;/li&gt;
&lt;/ul&gt;</content>
    <link href="https://github.com/ZoeyVid/NPMplus/releases/tag/ocsp-stapling-must-staple" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/ZoeyVid/NPMplus/releases/tag/2024-12-14-r1</id>
    <title>New release for NPMplus: 2024-12-14-r1</title>
    <updated>2024-12-14T13:27:11-05:00</updated>
    <author>
      <name>ZoeyVid/NPMplus</name>
    </author>
    <content>&lt;h2&gt;What's Changed&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ACME_SERVER and ACME_MUST_STAPLE values will now also apply when renewing existing certs&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;update alpine to 3.21&lt;/li&gt;
&lt;li&gt;update crs to 4.9.0&lt;/li&gt;
&lt;li&gt;use alpine curl instead of my own curl-quic build&lt;/li&gt;
&lt;li&gt;other small dep updates&lt;/li&gt;
&lt;li&gt;upstream merges (fix https://github.com/NginxProxyManager/nginx-proxy-manager/issues/4168, implement https://github.com/NginxProxyManager/nginx-proxy-manager/pull/4163)&lt;/li&gt;
&lt;li&gt;404 page is now called dead page and should return 404&lt;/li&gt;
&lt;li&gt;readd DNS propagation delay&lt;/li&gt;
&lt;li&gt;default mime type is now application/octet-stream (means download)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;How to update&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;NOTE: watchtwoer does NOT update NPMplus&lt;/li&gt;
&lt;li&gt;Read the changes above&lt;/li&gt;
&lt;li&gt;Pull the zoeyvid/npmplus:latest image&lt;/li&gt;
&lt;li&gt;apply possible changes that maybe effect you from above to your compose.yaml/NPMplus&lt;/li&gt;
&lt;li&gt;redeploy the compose stack&lt;/li&gt;
&lt;li&gt;report any issues you find&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Full Changelog&lt;/strong&gt;: https://github.com/ZoeyVid/NPMplus/compare/2024-11-25-r1...2024-12-14-r1&lt;/p&gt;</content>
    <link href="https://github.com/ZoeyVid/NPMplus/releases/tag/2024-12-14-r1" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/ZoeyVid/NPMplus/releases/tag/2025-01-10-r1</id>
    <title>New release for NPMplus: 2025-01-10-r1</title>
    <updated>2025-01-10T12:52:48-05:00</updated>
    <author>
      <name>ZoeyVid/NPMplus</name>
    </author>
    <content>&lt;h2&gt;Note: All hosts will regenerate when updating to this version&lt;/h2&gt;
&lt;h2&gt;Note: The path where the geoip databases for goaccess are saved has move from etc/goaccess/geoip to goaccess/geoip inside the mounted data folder, if you auto update them, please adjust the path&lt;/h2&gt;
&lt;h2&gt;Note if you used the last alpha, please switch back to the latest tag&lt;/h2&gt;
&lt;h2&gt;What's Changed&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;http3 should now be way faster (http3_stream_buffer_size was too small)&lt;/li&gt;
&lt;li&gt;all your hosts will now regenerate once and when you update an env which influences a template&lt;/li&gt;
&lt;li&gt;use liquidjs itself instead of sed to modify persistent hosts and templates based on envs&lt;/li&gt;
&lt;li&gt;slim start.sh because many migrations are now done by simply recreating all hosts&lt;/li&gt;
&lt;li&gt;remove migrations from very old NPMplus versions (migration from upstream NPM still possible)&lt;/li&gt;
&lt;li&gt;allow changing http/https ports&lt;/li&gt;
&lt;li&gt;merge tls-ciphers-no-stapling.conf tls-ciphers.conf into one file &lt;/li&gt;
&lt;li&gt;disable ACME_MUST_STAPLE by default&lt;/li&gt;
&lt;li&gt;new ACME_OCSP_STAPLING env controlling if stapling should happen, currently on, will be disabled end april&lt;/li&gt;
&lt;li&gt;env DB_SQLITE_FILE and env CLEAN are now unsupported&lt;/li&gt;
&lt;li&gt;NPM_DISABLE_IPV6 and GOA_DISABLE_IPV6 are now removed and included in DISABLE_IPV6&lt;/li&gt;
&lt;li&gt;update all stapling files before starting all services&lt;/li&gt;
&lt;li&gt;default host is not mounted anymore and recreated on each container start&lt;/li&gt;
&lt;li&gt;nginxbeautifier now only runs on hosts generation&lt;/li&gt;
&lt;li&gt;fix unresponsive start page (upstream issue, fixed by reverting upstream commit)&lt;/li&gt;
&lt;li&gt;dep updates&lt;/li&gt;
&lt;li&gt;support php84&lt;/li&gt;
&lt;li&gt;update readme&lt;/li&gt;
&lt;li&gt;update security.txt&lt;/li&gt;
&lt;li&gt;merge upstream&lt;/li&gt;
&lt;li&gt;improve folder structure (mainly move all folders inside etc to root data folder)&lt;/li&gt;
&lt;li&gt;watchtower is now allowed to update NPMplus (envs have moved to start.sh)&lt;/li&gt;
&lt;li&gt;frontend now only allows enabling coreruleset if modsec is also enabled&lt;/li&gt;
&lt;li&gt;quic_bpf support (default off, since it needs NPMplus to run as a privileged container)&lt;/li&gt;
&lt;li&gt;NIBEP and GOAIWSP have changed their default values&lt;/li&gt;
&lt;li&gt;streams forwarding_port now allows $server_port as a valid input&lt;/li&gt;
&lt;li&gt;allowed syntax for domain names and stream/proxy forward_host have changed&lt;/li&gt;
&lt;li&gt;added support for INITIAL_DEFAULT_PAGE&lt;/li&gt;
&lt;li&gt;remove kyber (mlkem is supported)&lt;/li&gt;
&lt;li&gt;use freenginx default tls setting when connecting to upstream server&lt;/li&gt;
&lt;li&gt;rename nginx_custom folder to custom_nginx&lt;/li&gt;
&lt;li&gt;unify proxy.conf and proxy-location.conf to proxy-headers.conf&lt;/li&gt;
&lt;li&gt;new dummy certs now use secp384r1 instead of rsa4096&lt;/li&gt;
&lt;li&gt;integrate no-servername files in the normal configs&lt;/li&gt;
&lt;li&gt;allow disabling hsts subdomains via env&lt;/li&gt;
&lt;li&gt;support upstream X_FRAME_OPTIONS env, also change its default from SAMEORIGIN to DENY, add option to not set it&lt;/li&gt;
&lt;li&gt;remove Referrer-Police header (default value when unset is the same as NPMplus used before: strict-origin-when-cross-origin)&lt;/li&gt;
&lt;li&gt;don't expose version when making a (authenticated/unauthenticated) request to NPMplus API (yes I know it is still visible on frontend)&lt;/li&gt;
&lt;li&gt;add ACME_KEY_TYPE env (default and recommended is still ecdsa)&lt;/li&gt;
&lt;li&gt;use #!/usr/bin/env sh instead of #!/bin/sh&lt;/li&gt;
&lt;li&gt;dns secrets are not mounted anymore, since they are saved in the db and rewritten on every container start, so they don't need to be mounted&lt;/li&gt;
&lt;li&gt;certbot is now built together with nginx&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;How to update&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;read the changes above&lt;/li&gt;
&lt;li&gt;repull the docker image&lt;/li&gt;
&lt;li&gt;apply possible changes that maybe effect you from above to your compose.yaml&lt;/li&gt;
&lt;li&gt;redeploy the compose stack&lt;/li&gt;
&lt;li&gt;report any issues you find&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Full Changelog&lt;/strong&gt;: https://github.com/ZoeyVid/NPMplus/compare/2024-12-14-r1...2025-01-10-r1&lt;/p&gt;</content>
    <link href="https://github.com/ZoeyVid/NPMplus/releases/tag/2025-01-10-r1" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/ZoeyVid/NPMplus/releases/tag/2025-01-11-r1</id>
    <title>New release for NPMplus: 2025-01-11-r1</title>
    <updated>2025-01-11T09:36:26-05:00</updated>
    <author>
      <name>ZoeyVid/NPMplus</name>
    </author>
    <content>&lt;h2&gt;What's Changed&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;allow uids/gids set to 99 and above&lt;/li&gt;
&lt;li&gt;fix healthcheck (hotfix from yesterday)&lt;/li&gt;
&lt;li&gt;dep updates&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;How to update&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;read the changes above&lt;/li&gt;
&lt;li&gt;repull the docker image&lt;/li&gt;
&lt;li&gt;apply possible changes that maybe effect you from above to your compose.yaml&lt;/li&gt;
&lt;li&gt;redeploy the compose stack&lt;/li&gt;
&lt;li&gt;report any issues you find&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Full Changelog&lt;/strong&gt;: https://github.com/ZoeyVid/NPMplus/compare/2025-01-10-r1...2025-01-11-r1&lt;/p&gt;</content>
    <link href="https://github.com/ZoeyVid/NPMplus/releases/tag/2025-01-11-r1" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/ZoeyVid/NPMplus/releases/tag/2025-01-11-r2</id>
    <title>New release for NPMplus: 2025-01-11-r2</title>
    <updated>2025-01-11T13:06:35-05:00</updated>
    <author>
      <name>ZoeyVid/NPMplus</name>
    </author>
    <content>&lt;h2&gt;What's Changed&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;fix #1371&lt;/li&gt;
&lt;li&gt;fix all hosts always regnerate on container restart&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;How to update&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;read the changes above&lt;/li&gt;
&lt;li&gt;repull the docker image&lt;/li&gt;
&lt;li&gt;apply possible changes that maybe effect you from above to your compose.yaml&lt;/li&gt;
&lt;li&gt;redeploy the compose stack&lt;/li&gt;
&lt;li&gt;report any issues you find&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Full Changelog&lt;/strong&gt;: https://github.com/ZoeyVid/NPMplus/compare/2025-01-10-r1...2025-01-11-r2&lt;/p&gt;</content>
    <link href="https://github.com/ZoeyVid/NPMplus/releases/tag/2025-01-11-r2" rel="alternate"/>
  </entry>
</feed>
