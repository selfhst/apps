<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
  <id>https://selfh.st/apps</id>
  <title>RunsOn Releases</title>
  <updated>2024-10-13T20:32:53.886129-04:00</updated>
  <author>
    <name>selfh.st</name>
    <email>contact@selfh.st</email>
  </author>
  <link href="https://selfh.st/apps" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <subtitle>Self-hosted software releases generated by selfh.st</subtitle>
  <entry>
    <id>https://github.com/runs-on/runs-on/releases/tag/v2.3.0</id>
    <title>New release for RunsOn: v2.3.0</title>
    <updated>2024-06-13T03:54:13-04:00</updated>
    <author>
      <name>runs-on/runs-on</name>
    </author>
    <content>&lt;p&gt;Summary: Allow setting custom spot allocation strategy, &lt;code&gt;cpu&lt;/code&gt; and &lt;code&gt;ram&lt;/code&gt; behaviour change, config file is now read from the current branch for private repositories. And 2 new regions!&lt;/p&gt;
&lt;h2&gt;Potentially breaking changes&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-fleet-allocation-strategy.html"&gt;Spot allocation strategy&lt;/a&gt; now defaults to &lt;code&gt;price-capacity-optimized&lt;/code&gt; instead of &lt;code&gt;capacity-optimized&lt;/code&gt;, which should bring even better cost savings while still ensuring low spot interruption percentage. The downside of that strategy might be a higher likelihood of interruption, but you can now override the strategy (see next section). Also, the next change below might reduce interruption likelihood by automatically expanding the instance pools that EC2 chooses from.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;No longer specify any max for RAM or CPU when requesting an instance, so that we may get a beefier instance if the spot allocation strategy prioritises it. This could be due to lower price, or due to a less interruption likelihood. This means you no longer need to set &lt;code&gt;ram=2+4+8+16+...&lt;/code&gt; since &lt;code&gt;ram=2&lt;/code&gt; will automatically include 2+ GB instances (if you set multiple values: all values except for the first one will be ignored). Same for CPU.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Note that those two changes might be reverted if many users report increased issues with spot interruptions.&lt;/p&gt;
&lt;h2&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;New regions: Ohio (&lt;code&gt;us-east-2&lt;/code&gt;), and Singapore (&lt;code&gt;ap-southeast-1&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;Can now override the default spot allocation strategy, using either the full strategy name (e.g. &lt;code&gt;spot=lowest-price&lt;/code&gt;), or its initials (e.g. &lt;code&gt;spot=lp&lt;/code&gt;). Supported allocation strategies: &lt;code&gt;price-capacity-optimized&lt;/code&gt;, &lt;code&gt;lowest-price&lt;/code&gt;, &lt;code&gt;capacity-optimized&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Automatically mount locally-attached SSD disks if any (for instances types ending with the &lt;code&gt;d&lt;/code&gt; suffix). Very useful if you require large disk sizes with the fastest speed.&lt;/li&gt;
&lt;li&gt;Add new tags &lt;code&gt;runs-on-workflow-name&lt;/code&gt; and &lt;code&gt;runs-on-workflow-job-name&lt;/code&gt; to the runner instance, once the job has been scheduled on the instance (good for cost allocation, troubleshooting, etc.).&lt;/li&gt;
&lt;li&gt;For private repositories, the configuration file will now be read from the current branch.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Fixes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;For non-official images, setup runner user earlier, so that SSH keys can be properly added to that user.&lt;/li&gt;
&lt;li&gt;Set environment variable &lt;code&gt;RUNNER_TOOL_CACHE&lt;/code&gt; to &lt;code&gt;/opt/hostedtoolcache&lt;/code&gt;, since some third-party actions have this value hardcoded. This is the default value on official runners as well.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Send instance timings to telemetry API. This will allow better tracking of boot times across all users and regions.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Upgrade&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://runs-on.com/guides/upgrade/"&gt;Upgrade Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;CloudFormation Template URL: https://runs-on.s3.eu-west-1.amazonaws.com/cloudformation/template.yaml&lt;/li&gt;
&lt;li&gt;CloudFormation Versioned template URL: https://runs-on.s3.eu-west-1.amazonaws.com/cloudformation/template-v2.3.0.yaml&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Full Changelog&lt;/strong&gt;: https://github.com/runs-on/runs-on/compare/v2.2.4...v2.3.0&lt;/p&gt;</content>
    <link href="https://github.com/runs-on/runs-on/releases/tag/v2.3.0" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/runs-on/runs-on/releases/tag/v2.3.1</id>
    <title>New release for RunsOn: v2.3.1</title>
    <updated>2024-06-19T10:31:22-04:00</updated>
    <author>
      <name>runs-on/runs-on</name>
    </author>
    <content>&lt;p&gt;Summary: Auto-mounting of ephemeral disks, improvements in dangling instance cleanup, better handling of &lt;code&gt;preinstall&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Local NVME disks (if any) are now automatically arranged in a RAID0 array, and &lt;strong&gt;automatically mounted&lt;/strong&gt; as the workspace folder for the workflow job (i.e. at &lt;code&gt;/home/runner/_work&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;Add server-side check and cleanup of dangling instances. If an instance has not been tagged with a job name within 15 minutes of its launch, it will be force-terminated by the RunsOn server. This complements the watchdog of 10 minutes on the agent side, in case the agent cannot properly launch.&lt;/li&gt;
&lt;li&gt;Can now define &lt;code&gt;preinstall&lt;/code&gt; within a custom &lt;code&gt;runner&lt;/code&gt; definition. This will override any existing &lt;code&gt;preinstall&lt;/code&gt; from the &lt;code&gt;image&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img width="284" alt="image" src="https://github.com/runs-on/runs-on/assets/6114/9da64d89-b87e-4644-a6fc-fc846b64f81e"&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Abort the job if &lt;code&gt;preinstall&lt;/code&gt; failed, and display its output in the log output of the "Set up runner" step in the GitHub UI.
&lt;img width="708" alt="image" src="https://github.com/runs-on/runs-on/assets/6114/2149e58c-536f-4ded-9d40-e04fb2f6beca"&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Automatically install the latest version of the &lt;a href="https://github.com/actions/runner"&gt;runner&lt;/a&gt; agent, when using custom images not based on the official images provided by RunsOn.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Fixes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;No longer include bare &lt;code&gt;metal&lt;/code&gt; instances by default. They are now included only if one of the &lt;code&gt;family&lt;/code&gt; types include &lt;code&gt;metal&lt;/code&gt; in its name.&lt;/li&gt;
&lt;li&gt;Reset instance creation timeout when falling back to on-demand pricing.&lt;/li&gt;
&lt;li&gt;Fix ephemeral disk mounts.&lt;/li&gt;
&lt;li&gt;Display preinstall output in &lt;code&gt;/var/log/cloud-init-output.log&lt;/code&gt;, in addition to logging it in the job log output on GitHub.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Internal refactoring for server and agent code.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Upgrade&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://runs-on.com/guides/upgrade/"&gt;Upgrade Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;CloudFormation Template URL: https://runs-on.s3.eu-west-1.amazonaws.com/cloudformation/template.yaml&lt;/li&gt;
&lt;li&gt;CloudFormation Versioned template URL: https://runs-on.s3.eu-west-1.amazonaws.com/cloudformation/template-v2.3.1.yaml&lt;/li&gt;
&lt;/ul&gt;</content>
    <link href="https://github.com/runs-on/runs-on/releases/tag/v2.3.1" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/runs-on/runs-on/releases/tag/v2.3.2</id>
    <title>New release for RunsOn: </title>
    <updated>2024-06-21T08:07:10-04:00</updated>
    <author>
      <name>runs-on/runs-on</name>
    </author>
    <content>&lt;p&gt;Summary: a fix for useless creation of instances when hitting quota errors, reverting the unbounded &lt;code&gt;cpu&lt;/code&gt; and &lt;code&gt;ram&lt;/code&gt; change (from v2.3.0), and CloudWatch agent now streams instance logs into CloudWatch.&lt;/p&gt;
&lt;h2&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;The change introduced in &lt;code&gt;v2.3.0&lt;/code&gt; expanded the instance choice by allowing instances with more CPUs and RAM than specified to be included. This has been reverted to avoid confusion, and to avoid hitting quota limits more frequently. Instead, RunsOn will take the lowest and highest value from the &lt;code&gt;cpu&lt;/code&gt; and &lt;code&gt;ram&lt;/code&gt; definitions, and set that as min and max values when requesting an instance. If you want to keep the behaviour introduced in &lt;code&gt;v2.3.0&lt;/code&gt;, you can now simply do e.g. &lt;code&gt;cpu=4+256&lt;/code&gt; and it will evaluate all instances with cpus from 4 to 256. You no longer need to set multiple values like &lt;code&gt;cpu=4+8+16+32...&lt;/code&gt;, since only the min and max values will be used. As another example, setting &lt;code&gt;cpu=4&lt;/code&gt; will only include instance with 4 CPUs, as it was the case before &lt;code&gt;v2.3.0&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Automatically send cloud-init logs to CloudWatch. Should help a lot with knowing what happened on an instance in case it terminated early. Currently ships &lt;code&gt;/var/log/cloud-init-output.log&lt;/code&gt;, &lt;code&gt;/var/log/syslog&lt;/code&gt;, and &lt;code&gt;/var/log/cloudwatch-agent.log&lt;/code&gt;. Retention set to 7 days. Requires the CloudWatch agent to be installed on the base AMI (&lt;code&gt;amazon-cloudwatch-agent-ctl&lt;/code&gt; must be in the &lt;code&gt;PATH&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;New CloudFormation parameter to enable/disable detailed monitoring for EC2 instances (default: &lt;code&gt;false&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Add &lt;code&gt;job_url&lt;/code&gt; to all log messages.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Add &lt;code&gt;runs-on-workflow-run-id&lt;/code&gt; tag on instance, when job has started.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;All instances will now get a &lt;code&gt;Name&lt;/code&gt; assigned when the instance starts processing a job from GitHub. Quite useful to monitor at a glance in EC2 UI which instances have started processing jobs.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img width="846" alt="image" src="https://github.com/runs-on/runs-on/assets/6114/cd6a1824-cca2-4697-887f-81a39003389b"&gt;&lt;/p&gt;
&lt;h2&gt;Fixes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;CreateFleet&lt;/code&gt; API can sometimes return an instance, even if errors are present in the response. Checking this fixes an issue that was creating more instances than necessary when hitting e.g. quota errors.&lt;/li&gt;
&lt;li&gt;Ensure runner waits up to 10s until all tags have been set on the instance before shutting down.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Misc&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Always prepend preinstall script with &lt;code&gt;#!/bin/bash -e&lt;/code&gt;, and make RunsOn environment variables accessible.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Upgrade&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://runs-on.com/guides/upgrade/"&gt;Upgrade Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;CloudFormation Template URL: https://runs-on.s3.eu-west-1.amazonaws.com/cloudformation/template.yaml&lt;/li&gt;
&lt;li&gt;CloudFormation Versioned template URL: https://runs-on.s3.eu-west-1.amazonaws.com/cloudformation/template-v2.3.2.yaml&lt;/li&gt;
&lt;/ul&gt;</content>
    <link href="https://github.com/runs-on/runs-on/releases/tag/v2.3.2" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/runs-on/runs-on/releases/tag/v2.5.0</id>
    <title>New release for RunsOn: v2.5.0</title>
    <updated>2024-08-28T03:50:30-04:00</updated>
    <author>
      <name>runs-on/runs-on</name>
    </author>
    <content>&lt;p&gt;Summary: Allow to assign an environment name to each RunsOn stack. Allow to specify VPC CIDR block and export outputs to facilitate VPC peering connections. Allow to set custom tags on instances.&lt;/p&gt;
&lt;h2&gt;Potentially breaking changes&lt;/h2&gt;
&lt;p&gt;If you have set the &lt;code&gt;Private&lt;/code&gt; parameter to &lt;code&gt;true&lt;/code&gt; in the CloudFormation template, the behaviour has changed:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The stack will now create only 1 managed NAT gateway (instead of 3) when enabling &lt;code&gt;Private&lt;/code&gt; mode, to save on costs.&lt;/li&gt;
&lt;li&gt;Also, runners will be launched in the private subnets &lt;strong&gt;only if the label &lt;code&gt;private=true&lt;/code&gt; is present&lt;/strong&gt; in the &lt;code&gt;runs-on:&lt;/code&gt; definition. This way, runners will launch in the public subnets by default, and you can selectively use the private subnet (to get the egress static IP) for specific workflows. This saves on NAT bandwidth costs since most workflows don't need static IP.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Allow assigning an environment name to a RunsOn stack (default &lt;code&gt;production&lt;/code&gt;), which can then be targeted by using the &lt;code&gt;env&lt;/code&gt; label in the workflow. This allows setting up multiple isolated RunsOn stacks to handle environments such as &lt;code&gt;staging&lt;/code&gt; etc. with different IAM permissions or configurations. Fixes #120.&lt;/li&gt;
&lt;li&gt;Allow specifying a custom VPC CIDR block when creating the stack. This helps if you plan on establishing VPC peering connections with your RunsOn runners. Note that updating this parameter for existing stacks is not recommended. You should create a new stack instead, and remove the old one. Fixes #114.&lt;/li&gt;
&lt;li&gt;Provide a CloudFormation template to facilitate the establishment of a VPC peering connection between RunsOn's VPC, and a destination VPC.&lt;/li&gt;
&lt;li&gt;Allow setting custom tags on the instances launched by RunsOn (&lt;code&gt;RunnerCustomTags&lt;/code&gt; CloudFormation parameter). Fixes #119.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Upgrade&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://runs-on.com/guides/upgrade/"&gt;Upgrade Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;CloudFormation Versioned template URL: https://runs-on.s3.eu-west-1.amazonaws.com/cloudformation/template-v2.5.0.yaml&lt;/li&gt;
&lt;li&gt;CloudFormation Template URL: https://runs-on.s3.eu-west-1.amazonaws.com/cloudformation/template.yaml&lt;/li&gt;
&lt;/ul&gt;</content>
    <link href="https://github.com/runs-on/runs-on/releases/tag/v2.5.0" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/runs-on/runs-on/releases/tag/v2.5.4</id>
    <title>New release for RunsOn: v2.5.4</title>
    <updated>2024-09-25T11:16:35-04:00</updated>
    <author>
      <name>runs-on/runs-on</name>
    </author>
    <content>&lt;p&gt;New ubuntu24 images, new housekeeping task to auto-restart instances that failed to launch, new always-on Private setting, additional runner details in logs, and more.&lt;/p&gt;
&lt;h2&gt;Notable changes (from v2.5.0 to v2.5.4)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Add ubuntu24 official images: &lt;code&gt;ubuntu24-full-x64&lt;/code&gt; and &lt;code&gt;ubuntu24-full-arm64&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Private&lt;/code&gt; CloudFormation parameter now accepts &lt;code&gt;always&lt;/code&gt; as value, in which case the runners will always launch in the private subnets by default (unless opt-out with &lt;code&gt;private=false&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;Display GitHub current rate-limits in logs (search for &lt;code&gt;tokens&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;Add 'Private' dimension to cloudwatch stats.&lt;/li&gt;
&lt;li&gt;Add &lt;code&gt;Environment&lt;/code&gt;, &lt;code&gt;IsPrivate&lt;/code&gt;, and &lt;code&gt;StaticIp&lt;/code&gt; (if IsPrivate) to runner details (in Setup job logs)&lt;/li&gt;
&lt;li&gt;Increase frequency for spot interruption polling + add logs.&lt;/li&gt;
&lt;li&gt;Conform to AWS spec when sanitizing custom tags (key and value). Fixes #125.&lt;/li&gt;
&lt;li&gt;Add housekeeping task to handle edge cases where a job is still seen as queued by GitHub after a few minutes even after an instance has been launched.&lt;/li&gt;
&lt;li&gt;Allow to disable new housekeeping mechanism.&lt;/li&gt;
&lt;li&gt;Properly tag instance volumes with cost allocation tag. Cost report email will likely go up.&lt;/li&gt;
&lt;li&gt;Display &lt;code&gt;app_environment&lt;/code&gt; and &lt;code&gt;app_stack_name&lt;/code&gt; in logs.&lt;/li&gt;
&lt;li&gt;Attempt to fix rare preinstall issue ending up with "text file busy".&lt;/li&gt;
&lt;li&gt;Unregister runner from GitHub when job is completed (i.e. do not wait for auto-expiration since it does not seem that reliable).&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Experimental&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Bring back support for single string label, using &lt;code&gt;/&lt;/code&gt; as the separator instead of &lt;code&gt;,&lt;/code&gt;. e.g. &lt;code&gt;runs-on: runs-on/runner=2cpu-linux-x64/other=tag&lt;/code&gt; will work. This simplifies passing a runs-on specification as input to dependent workflows. If you have multiple RunsOn stacks, make sure they are all upgraded to this version before using this new syntax in workflows.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Internal&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix issue with &lt;code&gt;private&lt;/code&gt; attribute not being properly loaded from the repository configuration file.&lt;/li&gt;
&lt;li&gt;Switch to semaphores for processing the 3 queues.&lt;/li&gt;
&lt;li&gt;Check workflow run status before scheduling job.&lt;/li&gt;
&lt;li&gt;Add termination queue.&lt;/li&gt;
&lt;li&gt;Update GitHub App (for new installations) to listen for workflow_run events (not used yet, but will be soon).&lt;/li&gt;
&lt;li&gt;Upgrade default runner version when no runner is preinstalled.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Upgrade notes&lt;/h2&gt;
&lt;p&gt;When upgrading from v2.5.0 or lower, due to the rolling restart mechanism, some jobs that were received by a process launched with this version might end up being processed by the old app version, in which case you might get errors like &lt;code&gt;json: cannot unmarshal string into Go struct field RunnerLabels.Labels.Private of type bool&lt;/code&gt; in your logs, and some runners may fail to launch. This is due to an internal structure change, and you simply need to cancel and retry those jobs once, or let the new housekeeping job reschedule them. After a few minutes the old app process will be gone and everything should work as expected.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://runs-on.com/guides/upgrade/"&gt;Upgrade Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;CloudFormation Versioned template URL: https://runs-on.s3.eu-west-1.amazonaws.com/cloudformation/template-v2.5.4.yaml&lt;/li&gt;
&lt;/ul&gt;</content>
    <link href="https://github.com/runs-on/runs-on/releases/tag/v2.5.4" rel="alternate"/>
  </entry>
</feed>
