<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
  <id>https://selfh.st/apps</id>
  <title>restic Releases</title>
  <updated>2025-07-14T16:32:37.260694-04:00</updated>
  <author>
    <name>selfh.st</name>
    <email>contact@selfh.st</email>
  </author>
  <link href="https://selfh.st/apps" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <subtitle>Self-hosted software releases generated by selfh.st</subtitle>
  <entry>
    <id>https://github.com/restic/restic/releases/tag/v0.17.0</id>
    <title>New release for restic: restic 0.17.0</title>
    <updated>2024-07-26T05:45:09-04:00</updated>
    <author>
      <name>restic/restic</name>
    </author>
    <content>&lt;h1&gt;Changelog for restic 0.17.0 (2024-07-26)&lt;/h1&gt;
&lt;p&gt;The following sections list the changes in restic 0.17.0 relevant to restic users. The changes are ordered by importance.&lt;/p&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/3600"&gt;#3600&lt;/a&gt;: Handle unreadable xattrs in folders above &lt;code&gt;backup&lt;/code&gt; source&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/4209"&gt;#4209&lt;/a&gt;: Fix slow SFTP upload performance&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/pull/4503"&gt;#4503&lt;/a&gt;: Correct hardlink handling in &lt;code&gt;stats&lt;/code&gt; command&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/pull/4568"&gt;#4568&lt;/a&gt;: Prevent &lt;code&gt;forget --keep-tags &amp;lt;invalid&amp;gt;&lt;/code&gt; from deleting all snapshots&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/pull/4615"&gt;#4615&lt;/a&gt;: Make &lt;code&gt;find&lt;/code&gt; not sometimes ignore directories&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/4656"&gt;#4656&lt;/a&gt;: Properly report ID of newly added keys&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/pull/4703"&gt;#4703&lt;/a&gt;: Shutdown cleanly when receiving SIGTERM&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/pull/4709"&gt;#4709&lt;/a&gt;: Correct &lt;code&gt;--no-lock&lt;/code&gt; handling of &lt;code&gt;ls&lt;/code&gt; and &lt;code&gt;tag&lt;/code&gt; commands&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/4760"&gt;#4760&lt;/a&gt;: Fix possible error on concurrent cache cleanup&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/4850"&gt;#4850&lt;/a&gt;: Handle UTF-16 password files in &lt;code&gt;key&lt;/code&gt; command correctly&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/4902"&gt;#4902&lt;/a&gt;: Update snapshot summary on &lt;code&gt;rewrite&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Chg &lt;a href="https://github.com/restic/restic/issues/956"&gt;#956&lt;/a&gt;: Return exit code 10 and 11 for non-existing and locked repository&lt;/li&gt;
&lt;li&gt;Chg &lt;a href="https://github.com/restic/restic/issues/4540"&gt;#4540&lt;/a&gt;: Require at least ARMv6 for ARM binaries&lt;/li&gt;
&lt;li&gt;Chg &lt;a href="https://github.com/restic/restic/issues/4602"&gt;#4602&lt;/a&gt;: Deprecate legacy index format and &lt;code&gt;s3legacy&lt;/code&gt; repository layout&lt;/li&gt;
&lt;li&gt;Chg &lt;a href="https://github.com/restic/restic/issues/4627"&gt;#4627&lt;/a&gt;: Redesign backend error handling to improve reliability&lt;/li&gt;
&lt;li&gt;Chg &lt;a href="https://github.com/restic/restic/issues/4707"&gt;#4707&lt;/a&gt;: Disable S3 anonymous authentication by default&lt;/li&gt;
&lt;li&gt;Chg &lt;a href="https://github.com/restic/restic/issues/4744"&gt;#4744&lt;/a&gt;: Include full key ID in JSON output of &lt;code&gt;key list&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/662"&gt;#662&lt;/a&gt;: Optionally skip snapshot creation if nothing changed&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/693"&gt;#693&lt;/a&gt;: Include snapshot size in &lt;code&gt;snapshots&lt;/code&gt; output&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/805"&gt;#805&lt;/a&gt;: Add bitrot detection to &lt;code&gt;diff&lt;/code&gt; command&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/828"&gt;#828&lt;/a&gt;: Improve features of the &lt;code&gt;repair packs&lt;/code&gt; command&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/1786"&gt;#1786&lt;/a&gt;: Support repositories with empty password&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/2348"&gt;#2348&lt;/a&gt;: Add &lt;code&gt;--delete&lt;/code&gt; option to &lt;code&gt;restore&lt;/code&gt; command&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/pull/3067"&gt;#3067&lt;/a&gt;: Add extended options to configure Windows Shadow Copy Service&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/3406"&gt;#3406&lt;/a&gt;: Improve &lt;code&gt;dump&lt;/code&gt; performance for large files&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/3806"&gt;#3806&lt;/a&gt;: Optimize and make &lt;code&gt;prune&lt;/code&gt; command resumable&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/pull/4006"&gt;#4006&lt;/a&gt;: (alpha) Store deviceID only for hardlinks&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4048"&gt;#4048&lt;/a&gt;: Add support for FUSE-T with &lt;code&gt;mount&lt;/code&gt; on macOS&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4251"&gt;#4251&lt;/a&gt;: Support reading backup from a command's standard output&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4287"&gt;#4287&lt;/a&gt;: Support connection to rest-server using unix socket&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/pull/4354"&gt;#4354&lt;/a&gt;: Significantly reduce &lt;code&gt;prune&lt;/code&gt; memory usage&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4437"&gt;#4437&lt;/a&gt;: Make &lt;code&gt;check&lt;/code&gt; command create non-existent cache directory&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4472"&gt;#4472&lt;/a&gt;: Support AWS Assume Role for S3 backend&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4547"&gt;#4547&lt;/a&gt;: Add &lt;code&gt;--json&lt;/code&gt; option to &lt;code&gt;version&lt;/code&gt; command&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4549"&gt;#4549&lt;/a&gt;: Add &lt;code&gt;--ncdu&lt;/code&gt; option to &lt;code&gt;ls&lt;/code&gt; command&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/pull/4573"&gt;#4573&lt;/a&gt;: Support rewriting host and time metadata in snapshots&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4583"&gt;#4583&lt;/a&gt;: Ignore &lt;code&gt;s3.storage-class&lt;/code&gt; archive tiers for metadata&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/pull/4590"&gt;#4590&lt;/a&gt;: Speed up &lt;code&gt;mount&lt;/code&gt; command's error detection&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4601"&gt;#4601&lt;/a&gt;: Add support for feature flags&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/pull/4611"&gt;#4611&lt;/a&gt;: Back up more file metadata on Windows&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/pull/4664"&gt;#4664&lt;/a&gt;: Make &lt;code&gt;ls&lt;/code&gt; use &lt;code&gt;message_type&lt;/code&gt; field in JSON output&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4676"&gt;#4676&lt;/a&gt;: Make &lt;code&gt;key&lt;/code&gt; command's actions separate sub-commands&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4678"&gt;#4678&lt;/a&gt;: Add &lt;code&gt;--target&lt;/code&gt; option to the &lt;code&gt;dump&lt;/code&gt; command&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/pull/4708"&gt;#4708&lt;/a&gt;: Back up and restore SecurityDescriptors on Windows&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4733"&gt;#4733&lt;/a&gt;: Allow specifying &lt;code&gt;--host&lt;/code&gt; via environment variable&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/pull/4737"&gt;#4737&lt;/a&gt;: Include snapshot ID in &lt;code&gt;reason&lt;/code&gt; field of &lt;code&gt;forget&lt;/code&gt; JSON output&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/pull/4764"&gt;#4764&lt;/a&gt;: Support forgetting all snapshots&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4768"&gt;#4768&lt;/a&gt;: Allow specifying custom User-Agent for outgoing requests&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4781"&gt;#4781&lt;/a&gt;: Add &lt;code&gt;restore&lt;/code&gt; options to read include/exclude patterns from files&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/pull/4807"&gt;#4807&lt;/a&gt;: Support Extended Attributes on Windows NTFS&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4817"&gt;#4817&lt;/a&gt;: Make overwrite behavior of &lt;code&gt;restore&lt;/code&gt; customizable&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/pull/4839"&gt;#4839&lt;/a&gt;: Add dry-run support to &lt;code&gt;restore&lt;/code&gt; command&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Details&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #3600: Handle unreadable xattrs in folders above &lt;code&gt;backup&lt;/code&gt; source&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;When backup sources are specified using absolute paths, &lt;code&gt;backup&lt;/code&gt; also includes information about the parent folders of the backup sources in the snapshot.&lt;/p&gt;
&lt;p&gt;If the extended attributes for some of these folders could not be read due to missing permissions, this caused the backup to fail. This has now been fixed.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#3600](https://github.com/restic/restic/issues/3600) [#4668](https://github.com/restic/restic/pull/4668) https://forum.restic.net/t/parent-directories-above-the-snapshot-source-path-fatal-error-permission-denied/7216
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #4209: Fix slow SFTP upload performance&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Since restic 0.12.1, the upload speed of the sftp backend to a remote server has regressed significantly. This has now been fixed.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4209](https://github.com/restic/restic/issues/4209) [#4782](https://github.com/restic/restic/pull/4782)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #4503: Correct hardlink handling in &lt;code&gt;stats&lt;/code&gt; command&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If files on different devices had the same inode ID, the &lt;code&gt;stats&lt;/code&gt; command did not correctly calculate the snapshot size. This has now been fixed.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4503](https://github.com/restic/restic/pull/4503) [#4006](https://github.com/restic/restic/pull/4006) https://forum.restic.net/t/possible-bug-in-stats/6461/8
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #4568: Prevent &lt;code&gt;forget --keep-tags &amp;lt;invalid&amp;gt;&lt;/code&gt; from deleting all snapshots&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Running &lt;code&gt;forget --keep-tags &amp;lt;invalid&amp;gt;&lt;/code&gt;, where &lt;code&gt;&amp;lt;invalid&amp;gt;&lt;/code&gt; is a tag that does not exist in the repository, would remove all snapshots. This is especially problematic if the tag name contains a typo.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;forget&lt;/code&gt; command now fails with an error if all snapshots in a snapshot group would be deleted. This prevents the above example from deleting all snapshots.&lt;/p&gt;
&lt;p&gt;It is possible to temporarily disable the new check by setting the environment variable &lt;code&gt;RESTIC_FEATURES=safe-forget-keep-tags=false&lt;/code&gt;. Note that this feature flag will be removed in the next minor restic version.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4568](https://github.com/restic/restic/pull/4568) [#4764](https://github.com/restic/restic/pull/4764)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #4615: Make &lt;code&gt;find&lt;/code&gt; not sometimes ignore directories&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In some cases, the &lt;code&gt;find&lt;/code&gt; command ignored empty or moved directories. This has now been fixed.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4615](https://github.com/restic/restic/pull/4615)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #4656: Properly report ID of newly added keys&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;restic key add&lt;/code&gt; now reports the ID of the newly added key. This simplifies selecting a specific key using the &lt;code&gt;--key-hint key&lt;/code&gt; option.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4656](https://github.com/restic/restic/issues/4656) [#4657](https://github.com/restic/restic/pull/4657)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #4703: Shutdown cleanly when receiving SIGTERM&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Previously, when restic received the SIGTERM signal it would terminate immediately, skipping cleanup and potentially causing issues like stale locks being left behind. This primarily effected containerized restic invocations that use SIGTERM, but could also be triggered via a simple &lt;code&gt;killall restic&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;This has now been fixed, such that restic shuts down cleanly when receiving the SIGTERM signal.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4703](https://github.com/restic/restic/pull/4703)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #4709: Correct &lt;code&gt;--no-lock&lt;/code&gt; handling of &lt;code&gt;ls&lt;/code&gt; and &lt;code&gt;tag&lt;/code&gt; commands&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;ls&lt;/code&gt; command never locked the repository. This has now been fixed, with the old behavior still being supported using &lt;code&gt;ls --no-lock&lt;/code&gt;. The latter invocation also works with older restic versions.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;tag&lt;/code&gt; command erroneously accepted the &lt;code&gt;--no-lock&lt;/code&gt; command. This command now always requires an exclusive lock.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4709](https://github.com/restic/restic/pull/4709)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #4760: Fix possible error on concurrent cache cleanup&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If multiple restic processes concurrently cleaned up no longer existing files from the cache, this could cause some of the processes to fail with an &lt;code&gt;no such file or directory&lt;/code&gt; error. This has now been fixed.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4760](https://github.com/restic/restic/issues/4760) [#4761](https://github.com/restic/restic/pull/4761)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #4850: Handle UTF-16 password files in &lt;code&gt;key&lt;/code&gt; command correctly&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Previously, &lt;code&gt;key add&lt;/code&gt; and &lt;code&gt;key passwd&lt;/code&gt; did not properly decode UTF-16 encoded passwords read from a password file. This has now been fixed to correctly match the encoding when opening a repository.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4850](https://github.com/restic/restic/issues/4850) [#4851](https://github.com/restic/restic/pull/4851)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #4902: Update snapshot summary on &lt;code&gt;rewrite&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic previously did not recalculate the total number of files and bytes processed when files were excluded from a snapshot by the &lt;code&gt;rewrite&lt;/code&gt; command. This has now been fixed.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4902](https://github.com/restic/restic/issues/4902) [#4905](https://github.com/restic/restic/pull/4905)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Change #956: Return exit code 10 and 11 for non-existing and locked repository&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If a repository does not exist or cannot be locked, restic previously always returned exit code 1. This made it difficult to distinguish these cases from other errors.&lt;/p&gt;
&lt;p&gt;Restic now returns exit code 10 if the repository does not exist, and exit code 11 if the repository could be not locked due to a conflicting lock.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#956](https://github.com/restic/restic/issues/956) [#4884](https://github.com/restic/restic/pull/4884)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Change #4540: Require at least ARMv6 for ARM binaries&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The official release binaries of restic now require at least ARMv6 support for ARM platforms.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4540](https://github.com/restic/restic/issues/4540) [#4542](https://github.com/restic/restic/pull/4542)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Change #4602: Deprecate legacy index format and &lt;code&gt;s3legacy&lt;/code&gt; repository layout&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Support for the legacy index format used by restic before version 0.2.0 has been deprecated and will be removed in the next minor restic version. You can use &lt;code&gt;restic repair index&lt;/code&gt; to update the index to the current format.&lt;/p&gt;
&lt;p&gt;It is possible to temporarily reenable support for the legacy index format by setting the environment variable &lt;code&gt;RESTIC_FEATURES=deprecate-legacy-index=false&lt;/code&gt;. Note that this feature flag will be removed in the next minor restic version.&lt;/p&gt;
&lt;p&gt;Support for the &lt;code&gt;s3legacy&lt;/code&gt; repository layout used for the S3 backend before restic 0.7.0 has been deprecated and will be removed in the next minor restic version. You can migrate your S3 repository to the current layout using &lt;code&gt;RESTIC_FEATURES=deprecate-s3-legacy-layout=false restic migrate s3_layout&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;It is possible to temporarily reenable support for the &lt;code&gt;s3legacy&lt;/code&gt; layout by setting the environment variable &lt;code&gt;RESTIC_FEATURES=deprecate-s3-legacy-layout=false&lt;/code&gt;. Note that this feature flag will be removed in the next minor restic version.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4602](https://github.com/restic/restic/issues/4602) [#4724](https://github.com/restic/restic/pull/4724) [#4743](https://github.com/restic/restic/pull/4743)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Change #4627: Redesign backend error handling to improve reliability&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic now downloads pack files in large chunks instead of using a streaming download. This prevents failures due to interrupted streams. The &lt;code&gt;restore&lt;/code&gt; command now also retries downloading individual blobs that could not be retrieved.&lt;/p&gt;
&lt;p&gt;HTTP requests that are stuck for more than two minutes while uploading or downloading are now forcibly interrupted. This ensures that stuck requests are retried after a short timeout.&lt;/p&gt;
&lt;p&gt;Attempts to access a missing or truncated file will no longer be retried. This avoids unnecessary retries in those cases. All other backend requests are retried for up to 15 minutes. This ensures that temporarily interrupted network connections can be tolerated.&lt;/p&gt;
&lt;p&gt;If a download yields a corrupt file or blob, then the download will be retried once.&lt;/p&gt;
&lt;p&gt;Most parts of the new backend error handling can temporarily be disabled by setting the environment variable &lt;code&gt;RESTIC_FEATURES=backend-error-redesign=false&lt;/code&gt;. Note that this feature flag will be removed in the next minor restic version.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4627](https://github.com/restic/restic/issues/4627) [#4193](https://github.com/restic/restic/issues/4193) [#4515](https://github.com/restic/restic/issues/4515) [#1523](https://github.com/restic/restic/issues/1523) [#4605](https://github.com/restic/restic/pull/4605) [#4792](https://github.com/restic/restic/pull/4792) [#4520](https://github.com/restic/restic/pull/4520) [#4800](https://github.com/restic/restic/pull/4800) [#4784](https://github.com/restic/restic/pull/4784) [#4844](https://github.com/restic/restic/pull/4844)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Change #4707: Disable S3 anonymous authentication by default&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;When using the S3 backend with anonymous authentication, it continuously tried to retrieve new authentication credentials, causing bad performance.&lt;/p&gt;
&lt;p&gt;Now, to use anonymous authentication, it is necessary to pass the extended option &lt;code&gt;-o s3.unsafe-anonymous-auth=true&lt;/code&gt; to restic.&lt;/p&gt;
&lt;p&gt;It is possible to temporarily revert to the old behavior by setting the environment variable &lt;code&gt;RESTIC_FEATURES=explicit-s3-anonymous-auth=false&lt;/code&gt;. Note that this feature flag will be removed in the next minor restic version.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4707](https://github.com/restic/restic/issues/4707) [#4908](https://github.com/restic/restic/pull/4908)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Change #4744: Include full key ID in JSON output of &lt;code&gt;key list&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The JSON output of the &lt;code&gt;key list&lt;/code&gt; command has changed to include the full key ID instead of just a shortened version of the ID, as the latter can be ambiguous in some rare cases. To derive the short ID, please truncate the full ID down to eight characters.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4744](https://github.com/restic/restic/issues/4744) [#4745](https://github.com/restic/restic/pull/4745)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #662: Optionally skip snapshot creation if nothing changed&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;backup&lt;/code&gt; command always created a snapshot even if nothing in the backup set changed compared to the parent snapshot.&lt;/p&gt;
&lt;p&gt;Restic now supports the &lt;code&gt;--skip-if-unchanged&lt;/code&gt; option for the &lt;code&gt;backup&lt;/code&gt; command, which omits creating a snapshot if the new snapshot's content would be identical to that of the parent snapshot.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#662](https://github.com/restic/restic/issues/662) [#4816](https://github.com/restic/restic/pull/4816)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #693: Include snapshot size in &lt;code&gt;snapshots&lt;/code&gt; output&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;snapshots&lt;/code&gt; command now prints the size for snapshots created using this or a future restic version. To achieve this, the &lt;code&gt;backup&lt;/code&gt; command now stores the backup summary statistics in the snapshot.&lt;/p&gt;
&lt;p&gt;The text output of the &lt;code&gt;snapshots&lt;/code&gt; command only shows the snapshot size. The other statistics are only included in the JSON output. To inspect these statistics use &lt;code&gt;restic snapshots --json&lt;/code&gt; or &lt;code&gt;restic cat snapshot &amp;lt;snapshotID&amp;gt;&lt;/code&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#693](https://github.com/restic/restic/issues/693) [#4705](https://github.com/restic/restic/pull/4705) [#4913](https://github.com/restic/restic/pull/4913)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #805: Add bitrot detection to &lt;code&gt;diff&lt;/code&gt; command&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The output of the &lt;code&gt;diff&lt;/code&gt; command now includes the modifier &lt;code&gt;?&lt;/code&gt; for files to indicate bitrot in backed up files. The &lt;code&gt;?&lt;/code&gt; will appear whenever there is a difference in content while the metadata is exactly the same.&lt;/p&gt;
&lt;p&gt;Since files with unchanged metadata are normally not read again when creating a backup, the detection is only effective when the right-hand side of the diff has been created with &lt;code&gt;backup --force&lt;/code&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#805](https://github.com/restic/restic/issues/805) [#4526](https://github.com/restic/restic/pull/4526)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #828: Improve features of the &lt;code&gt;repair packs&lt;/code&gt; command&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;repair packs&lt;/code&gt; command has been improved to also be able to process truncated pack files. The &lt;code&gt;check&lt;/code&gt; and &lt;code&gt;check --read-data&lt;/code&gt; command will provide instructions on using the command if necessary to repair a repository. See the guide at https://restic.readthedocs.io/en/stable/077_troubleshooting.html for further instructions.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#828](https://github.com/restic/restic/issues/828) [#4644](https://github.com/restic/restic/pull/4644) [#4882](https://github.com/restic/restic/pull/4882)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #1786: Support repositories with empty password&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic previously required a password to create or operate on repositories. Using the new option &lt;code&gt;--insecure-no-password&lt;/code&gt; it is now possible to disable this requirement. Restic will not prompt for a password when using this option.&lt;/p&gt;
&lt;p&gt;For security reasons, the option must always be specified when operating on repositories with an empty password, and specifying &lt;code&gt;--insecure-no-password&lt;/code&gt; while also passing a password to restic via a CLI option or environment variable results in an error.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;init&lt;/code&gt; and &lt;code&gt;copy&lt;/code&gt; commands add the related &lt;code&gt;--from-insecure-no-password&lt;/code&gt; option, which applies to the source repository. The &lt;code&gt;key add&lt;/code&gt; and &lt;code&gt;key passwd&lt;/code&gt; commands add the &lt;code&gt;--new-insecure-no-password&lt;/code&gt; option to add or set an empty password.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#1786](https://github.com/restic/restic/issues/1786) [#4326](https://github.com/restic/restic/issues/4326) [#4698](https://github.com/restic/restic/pull/4698) [#4808](https://github.com/restic/restic/pull/4808)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #2348: Add &lt;code&gt;--delete&lt;/code&gt; option to &lt;code&gt;restore&lt;/code&gt; command&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;restore&lt;/code&gt; command now supports a &lt;code&gt;--delete&lt;/code&gt; option that allows removing files and directories from the target directory that do not exist in the snapshot. This option also allows files in the snapshot to replace non-empty directories having the same name.&lt;/p&gt;
&lt;p&gt;To check that only expected files are deleted, add the &lt;code&gt;--dry-run --verbose=2&lt;/code&gt; options.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#2348](https://github.com/restic/restic/issues/2348) [#4881](https://github.com/restic/restic/pull/4881)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #3067: Add extended options to configure Windows Shadow Copy Service&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Previous, restic always used a 120 seconds timeout and unconditionally created VSS snapshots for all volume mount points on disk. This behavior can now be fine-tuned by the following new extended options (available only on Windows):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-o vss.timeout&lt;/code&gt;: Time that VSS can spend creating snapshot before timing out (default: 120s)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-o vss.exclude-all-mount-points&lt;/code&gt;: Exclude mountpoints from snapshotting on all volumes (default: false)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-o vss.exclude-volumes&lt;/code&gt;: Semicolon separated list of volumes to exclude from snapshotting&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-o vss.provider&lt;/code&gt;: VSS provider identifier which will be used for snapshotting&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For example, change VSS timeout to five minutes and disable snapshotting of mount points on all volumes:&lt;/p&gt;
&lt;p&gt;Restic backup --use-fs-snapshot -o vss.timeout=5m -o vss.exclude-all-mount-points=true&lt;/p&gt;
&lt;p&gt;Exclude drive &lt;code&gt;d:&lt;/code&gt;, mount point &lt;code&gt;c:\mnt&lt;/code&gt; and a specific volume from snapshotting:&lt;/p&gt;
&lt;p&gt;Restic backup --use-fs-snapshot -o vss.exclude-volumes="d:\;c:\mnt\;\?\Volume{e2e0315d-9066-4f97-8343-eb5659b35762}"&lt;/p&gt;
&lt;p&gt;Uses 'Microsoft Software Shadow Copy provider 1.0' instead of the default provider:&lt;/p&gt;
&lt;p&gt;Restic backup --use-fs-snapshot -o vss.provider={b5946137-7b9f-4925-af80-51abd60b20d5}&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#3067](https://github.com/restic/restic/pull/3067)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #3406: Improve &lt;code&gt;dump&lt;/code&gt; performance for large files&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;dump&lt;/code&gt; command now retrieves the data chunks for a file in parallel. This improves the download performance by up to as many times as the configured number of parallel backend connections.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#3406](https://github.com/restic/restic/issues/3406) [#4796](https://github.com/restic/restic/pull/4796)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #3806: Optimize and make &lt;code&gt;prune&lt;/code&gt; command resumable&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Previously, if the &lt;code&gt;prune&lt;/code&gt; command was interrupted, a later &lt;code&gt;prune&lt;/code&gt; run would start repacking pack files from the start, as &lt;code&gt;prune&lt;/code&gt; did not update the index while repacking.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;prune&lt;/code&gt; command now supports resuming interrupted prune runs. The update of the repository index has also been optimized to use less memory and only rewrite parts of the index that have changed.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#3806](https://github.com/restic/restic/issues/3806) [#4812](https://github.com/restic/restic/pull/4812)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4006: (alpha) Store deviceID only for hardlinks&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Set &lt;code&gt;RESTIC_FEATURES=device-id-for-hardlinks&lt;/code&gt; to enable this alpha feature. The feature flag will be removed after repository format version 3 becomes available or be replaced with a different solution.&lt;/p&gt;
&lt;p&gt;When creating backups from a filesystem snapshot, for example created using BTRFS subvolumes, the deviceID of the filesystem changes compared to previous snapshots. This prevented restic from deduplicating the directory metadata of a snapshot.&lt;/p&gt;
&lt;p&gt;When this alpha feature is enabled, the deviceID is only stored for hardlinks, which significantly reduces the metadata duplication for most backups.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4006](https://github.com/restic/restic/pull/4006)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4048: Add support for FUSE-T with &lt;code&gt;mount&lt;/code&gt; on macOS&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The restic &lt;code&gt;mount&lt;/code&gt; command now supports creating FUSE mounts using FUSE-T on macOS.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4048](https://github.com/restic/restic/issues/4048) [#4825](https://github.com/restic/restic/pull/4825)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4251: Support reading backup from a command's standard output&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;backup&lt;/code&gt; command now supports the &lt;code&gt;--stdin-from-command&lt;/code&gt; option. When using this option, the arguments to &lt;code&gt;backup&lt;/code&gt; are interpreted as a command instead of paths to back up. &lt;code&gt;backup&lt;/code&gt; then executes the given command and stores the standard output from it in the backup, similar to the what the &lt;code&gt;--stdin&lt;/code&gt; option does. This also enables restic to verify that the command completes with exit code zero. A non-zero exit code causes the backup to fail.&lt;/p&gt;
&lt;p&gt;Note that the &lt;code&gt;--stdin&lt;/code&gt; option does not have to be specified at the same time, and that the &lt;code&gt;--stdin-filename&lt;/code&gt; option also applies to &lt;code&gt;--stdin-from-command&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Example: &lt;code&gt;restic backup --stdin-from-command --stdin-filename dump.sql mysqldump [...]&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4251](https://github.com/restic/restic/issues/4251) [#4410](https://github.com/restic/restic/pull/4410)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4287: Support connection to rest-server using unix socket&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic now supports using a unix socket to connect to a rest-server version 0.13.0 or later. This allows running restic as follows:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;rest-server --listen unix:/tmp/rest.socket --data /path/to/data &amp;amp;
   restic -r rest:http+unix:///tmp/rest.socket:/my_backup_repo/ [...]&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4287](https://github.com/restic/restic/issues/4287) [#4655](https://github.com/restic/restic/pull/4655)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4354: Significantly reduce &lt;code&gt;prune&lt;/code&gt; memory usage&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;prune&lt;/code&gt; command has been optimized to use up to 60% less memory. The memory usage should now be roughly similar to creating a backup.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4354](https://github.com/restic/restic/pull/4354) [#4812](https://github.com/restic/restic/pull/4812)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4437: Make &lt;code&gt;check&lt;/code&gt; command create non-existent cache directory&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Previously, if a custom cache directory was specified for the &lt;code&gt;check&lt;/code&gt; command, but the directory did not exist, &lt;code&gt;check&lt;/code&gt; continued with the cache disabled.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;check&lt;/code&gt; command now attempts to create the cache directory before initializing the cache.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4437](https://github.com/restic/restic/issues/4437) [#4805](https://github.com/restic/restic/pull/4805) [#4883](https://github.com/restic/restic/pull/4883)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4472: Support AWS Assume Role for S3 backend&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Previously only credentials discovered via the Minio discovery methods were used to authenticate.&lt;/p&gt;
&lt;p&gt;However, there are many circumstances where the discovered credentials have lower permissions and need to assume a specific role. This is now possible using the following new environment variables:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;RESTIC_AWS_ASSUME_ROLE_ARN&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RESTIC_AWS_ASSUME_ROLE_SESSION_NAME&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RESTIC_AWS_ASSUME_ROLE_EXTERNAL_ID&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RESTIC_AWS_ASSUME_ROLE_REGION&lt;/code&gt; (defaults to &lt;code&gt;us-east-1&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RESTIC_AWS_ASSUME_ROLE_POLICY&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;RESTIC_AWS_ASSUME_ROLE_STS_ENDPOINT&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/restic/restic/issues/4472"&gt;#4472&lt;/a&gt; &lt;a href="https://github.com/restic/restic/pull/4474"&gt;#4474&lt;/a&gt; &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Enhancement #4547: Add &lt;code&gt;--json&lt;/code&gt; option to &lt;code&gt;version&lt;/code&gt; command&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic now supports outputting restic version along with the Go version, OS and architecture used to build restic in JSON format using &lt;code&gt;version --json&lt;/code&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4547](https://github.com/restic/restic/issues/4547) [#4553](https://github.com/restic/restic/pull/4553)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4549: Add &lt;code&gt;--ncdu&lt;/code&gt; option to &lt;code&gt;ls&lt;/code&gt; command&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;NCDU (NCurses Disk Usage) is a tool to analyse disk usage of directories. It has an option to save a directory tree and analyse it later.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;ls&lt;/code&gt; command now supports outputting snapshot information in the NCDU format using the &lt;code&gt;--ncdu&lt;/code&gt; option. Example usage: &lt;code&gt;restic ls latest --ncdu | ncdu -f -&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4549](https://github.com/restic/restic/issues/4549) [#4550](https://github.com/restic/restic/pull/4550) [#4911](https://github.com/restic/restic/pull/4911)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4573: Support rewriting host and time metadata in snapshots&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;rewrite&lt;/code&gt; command now supports rewriting the host and/or time metadata of a snapshot using the new &lt;code&gt;--new-host&lt;/code&gt; and &lt;code&gt;--new-time&lt;/code&gt; options.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4573](https://github.com/restic/restic/pull/4573)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4583: Ignore &lt;code&gt;s3.storage-class&lt;/code&gt; archive tiers for metadata&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic used to store all files on S3 using the specified &lt;code&gt;s3.storage-class&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Now, restic will only use non-archive storage tiers for metadata, to avoid problems when accessing a repository. To restore any data, it is still necessary to manually warm up the required data beforehand.&lt;/p&gt;
&lt;p&gt;NOTE: There is no official cold storage support in restic, use this option at your own risk.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4583](https://github.com/restic/restic/issues/4583) [#4584](https://github.com/restic/restic/pull/4584)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4590: Speed up &lt;code&gt;mount&lt;/code&gt; command's error detection&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;mount&lt;/code&gt; command now checks for the existence of the mountpoint before opening the repository, leading to quicker error detection.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4590](https://github.com/restic/restic/pull/4590)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4601: Add support for feature flags&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic now supports feature flags that can be used to enable and disable experimental features. The flags can be set using the environment variable &lt;code&gt;RESTIC_FEATURES&lt;/code&gt;. To get a list of currently supported feature flags, use the &lt;code&gt;features&lt;/code&gt; command.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4601](https://github.com/restic/restic/issues/4601) [#4666](https://github.com/restic/restic/pull/4666)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4611: Back up more file metadata on Windows&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Previously, restic did not back up all common Windows-specific metadata.&lt;/p&gt;
&lt;p&gt;Restic now stores file creation time and file attributes like the hidden, read-only and encrypted flags when backing up files and folders on Windows.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4611](https://github.com/restic/restic/pull/4611)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4664: Make &lt;code&gt;ls&lt;/code&gt; use &lt;code&gt;message_type&lt;/code&gt; field in JSON output&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;ls&lt;/code&gt; command was the only restic command that used the &lt;code&gt;struct_type&lt;/code&gt; field in its JSON output format to specify the message type.&lt;/p&gt;
&lt;p&gt;The JSON output of the &lt;code&gt;ls&lt;/code&gt; command now also includes the &lt;code&gt;message_type&lt;/code&gt; field, which is consistent with other commands. The &lt;code&gt;struct_type&lt;/code&gt; field is still included, but now deprecated.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4664](https://github.com/restic/restic/pull/4664)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4676: Make &lt;code&gt;key&lt;/code&gt; command's actions separate sub-commands&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Each of the &lt;code&gt;add&lt;/code&gt;, &lt;code&gt;list&lt;/code&gt;, &lt;code&gt;remove&lt;/code&gt; and &lt;code&gt;passwd&lt;/code&gt; actions provided by the &lt;code&gt;key&lt;/code&gt; command is now a separate sub-command and have its own documentation which can be invoked using &lt;code&gt;restic key &amp;lt;add|list|remove|passwd&amp;gt; --help&lt;/code&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4676](https://github.com/restic/restic/issues/4676) [#4685](https://github.com/restic/restic/pull/4685)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4678: Add &lt;code&gt;--target&lt;/code&gt; option to the &lt;code&gt;dump&lt;/code&gt; command&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic &lt;code&gt;dump&lt;/code&gt; always printed to the standard output. It now supports specifying a &lt;code&gt;--target&lt;/code&gt; file to write its output to.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4678](https://github.com/restic/restic/issues/4678) [#4682](https://github.com/restic/restic/pull/4682) [#4692](https://github.com/restic/restic/pull/4692)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4708: Back up and restore SecurityDescriptors on Windows&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic now backs up and restores SecurityDescriptors for files and folders on Windows which includes owner, group, discretionary access control list (DACL) and system access control list (SACL).&lt;/p&gt;
&lt;p&gt;This requires the user to be a member of backup operators or the application must be run as admin. If that is not the case, only the current user's owner, group and DACL will be backed up, and during restore only the DACL of the backed up file will be restored, with the current user's owner and group being set on the restored file.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4708](https://github.com/restic/restic/pull/4708)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4733: Allow specifying &lt;code&gt;--host&lt;/code&gt; via environment variable&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic commands that operate on snapshots, such as &lt;code&gt;restic backup&lt;/code&gt; and &lt;code&gt;restic snapshots&lt;/code&gt;, support the &lt;code&gt;--host&lt;/code&gt; option to specify the hostname for grouping snapshots.&lt;/p&gt;
&lt;p&gt;Such commands now also support specifying the hostname via the environment variable &lt;code&gt;RESTIC_HOST&lt;/code&gt;. Note that &lt;code&gt;--host&lt;/code&gt; still takes precedence over the environment variable.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4733](https://github.com/restic/restic/issues/4733) [#4734](https://github.com/restic/restic/pull/4734)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4737: Include snapshot ID in &lt;code&gt;reason&lt;/code&gt; field of &lt;code&gt;forget&lt;/code&gt; JSON output&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The JSON output of the &lt;code&gt;forget&lt;/code&gt; command now includes &lt;code&gt;id&lt;/code&gt; and &lt;code&gt;short_id&lt;/code&gt; of snapshots in the &lt;code&gt;reason&lt;/code&gt; field.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4737](https://github.com/restic/restic/pull/4737)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4764: Support forgetting all snapshots&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;forget&lt;/code&gt; command now supports the &lt;code&gt;--unsafe-allow-remove-all&lt;/code&gt; option, which removes all snapshots in the repository.&lt;/p&gt;
&lt;p&gt;This option must always be combined with a snapshot filter (by host, path or tag). For example, the command &lt;code&gt;forget --tag example --unsafe-allow-remove-all&lt;/code&gt; removes all snapshots with the tag "example".&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4764](https://github.com/restic/restic/pull/4764)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4768: Allow specifying custom User-Agent for outgoing requests&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic now supports setting a custom &lt;code&gt;User-Agent&lt;/code&gt; for outgoing HTTP requests using the global option &lt;code&gt;--http-user-agent&lt;/code&gt; or the &lt;code&gt;RESTIC_HTTP_USER_AGENT&lt;/code&gt; environment variable.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4768](https://github.com/restic/restic/issues/4768) [#4810](https://github.com/restic/restic/pull/4810)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4781: Add &lt;code&gt;restore&lt;/code&gt; options to read include/exclude patterns from files&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic now supports reading include and exclude patterns from files using the &lt;code&gt;--include-file&lt;/code&gt;, &lt;code&gt;--exclude-file&lt;/code&gt;, &lt;code&gt;--iinclude-file&lt;/code&gt; and &lt;code&gt;--iexclude-file&lt;/code&gt; options of the &lt;code&gt;restore&lt;/code&gt; command.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4781](https://github.com/restic/restic/issues/4781) [#4811](https://github.com/restic/restic/pull/4811)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4807: Support Extended Attributes on Windows NTFS&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic now backs up and restores Extended Attributes for files and folders on Windows NTFS.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4807](https://github.com/restic/restic/pull/4807)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4817: Make overwrite behavior of &lt;code&gt;restore&lt;/code&gt; customizable&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;restore&lt;/code&gt; command now supports an &lt;code&gt;--overwrite&lt;/code&gt; option to configure whether already existing files are overwritten. The overwrite behavior can be configured using the following option values:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;--overwrite always&lt;/code&gt; (default): Always overwrites already existing files. The &lt;code&gt;restore&lt;/code&gt; command will verify the existing file content and only restore mismatching parts to minimize downloads. Updates the metadata of all files.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--overwrite if-changed&lt;/code&gt;: Like &lt;code&gt;always&lt;/code&gt;, but speeds up the file content check by assuming that files with matching size and modification time (mtime) are already up to date. In case of a mismatch, the full file content is verified like with &lt;code&gt;always&lt;/code&gt;. Updates the metadata of all files.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--overwrite if-newer&lt;/code&gt;: Like &lt;code&gt;always&lt;/code&gt;, but only overwrites existing files when the file in the snapshot has a newer modification time (mtime) than the existing file.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;--overwrite never&lt;/code&gt;: Never overwrites existing files.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/restic/restic/issues/4817"&gt;#4817&lt;/a&gt; &lt;a href="https://github.com/restic/restic/issues/200"&gt;#200&lt;/a&gt; &lt;a href="https://github.com/restic/restic/issues/407"&gt;#407&lt;/a&gt; &lt;a href="https://github.com/restic/restic/issues/2662"&gt;#2662&lt;/a&gt; &lt;a href="https://github.com/restic/restic/pull/4837"&gt;#4837&lt;/a&gt; &lt;a href="https://github.com/restic/restic/pull/4838"&gt;#4838&lt;/a&gt; &lt;a href="https://github.com/restic/restic/pull/4864"&gt;#4864&lt;/a&gt; &lt;a href="https://github.com/restic/restic/pull/4921"&gt;#4921&lt;/a&gt; &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Enhancement #4839: Add dry-run support to &lt;code&gt;restore&lt;/code&gt; command&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;restore&lt;/code&gt; command now supports the &lt;code&gt;--dry-run&lt;/code&gt; option to perform a dry run. Pass the &lt;code&gt;--verbose=2&lt;/code&gt; option to see which files would remain unchanged, and which would be updated or freshly restored.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4839](https://github.com/restic/restic/pull/4839)
&lt;/code&gt;&lt;/pre&gt;</content>
    <link href="https://github.com/restic/restic/releases/tag/v0.17.0" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/restic/restic/releases/tag/v0.17.1</id>
    <title>New release for restic: restic 0.17.1</title>
    <updated>2024-09-05T15:41:28-04:00</updated>
    <author>
      <name>restic/restic</name>
    </author>
    <content>&lt;h1&gt;Changelog for restic 0.17.1 (2024-09-05)&lt;/h1&gt;
&lt;p&gt;The following sections list the changes in restic 0.17.1 relevant to restic users. The changes are ordered by importance.&lt;/p&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/2004"&gt;#2004&lt;/a&gt;: Correctly handle volume names in &lt;code&gt;backup&lt;/code&gt; command on Windows&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/4945"&gt;#4945&lt;/a&gt;: Include missing backup error text with &lt;code&gt;--json&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/4953"&gt;#4953&lt;/a&gt;: Correctly handle long paths on older Windows versions&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/4957"&gt;#4957&lt;/a&gt;: Fix delayed cancellation of certain commands&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/pull/4958"&gt;#4958&lt;/a&gt;: Don't ignore metadata-setting errors during restore&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/4969"&gt;#4969&lt;/a&gt;: Correctly restore timestamp for files with resource forks on macOS&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/4975"&gt;#4975&lt;/a&gt;: Prevent &lt;code&gt;backup --stdin-from-command&lt;/code&gt; from panicking&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/pull/4980"&gt;#4980&lt;/a&gt;: Skip extended attribute processing on unsupported Windows volumes&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/5004"&gt;#5004&lt;/a&gt;: Fix spurious "A Required Privilege Is Not Held by the Client" error&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/5005"&gt;#5005&lt;/a&gt;: Fix rare failures to retry locking a repository&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/pull/5018"&gt;#5018&lt;/a&gt;: Improve HTTP/2 support for REST backend&lt;/li&gt;
&lt;li&gt;Chg &lt;a href="https://github.com/restic/restic/issues/4953"&gt;#4953&lt;/a&gt;: Also back up files with incomplete metadata&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4795"&gt;#4795&lt;/a&gt;: Display progress bar for &lt;code&gt;restore --verify&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4934"&gt;#4934&lt;/a&gt;: Automatically clear removed snapshots from cache&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4944"&gt;#4944&lt;/a&gt;: Print JSON-formatted errors during &lt;code&gt;restore --json&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/pull/4959"&gt;#4959&lt;/a&gt;: Return exit code 12 for "bad password" errors&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4970"&gt;#4970&lt;/a&gt;: Make timeout for stuck requests customizable&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Details&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #2004: Correctly handle volume names in &lt;code&gt;backup&lt;/code&gt; command on Windows&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;On Windows, when the specified backup target only included the volume name without a trailing slash, for example, &lt;code&gt;C:&lt;/code&gt;, then restoring the resulting snapshot would result in an error. Note that using &lt;code&gt;C:\&lt;/code&gt; as backup target worked correctly.&lt;/p&gt;
&lt;p&gt;Specifying volume names is now handled correctly. To restore snapshots created before this bugfix, use the &lt;snapshot&gt;:&lt;subpath&gt; syntax. For example, to restore a snapshot with ID &lt;code&gt;12345678&lt;/code&gt; that backed up &lt;code&gt;C:&lt;/code&gt;, use the following command:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;restic restore 12345678:/C/C:./ --target output/folder&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#2004](https://github.com/restic/restic/issues/2004) [#5028](https://github.com/restic/restic/pull/5028)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #4945: Include missing backup error text with &lt;code&gt;--json&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Previously, when running a backup with the &lt;code&gt;--json&lt;/code&gt; option, restic failed to include the actual error message in the output, resulting in &lt;code&gt;"error": {}&lt;/code&gt; being displayed.&lt;/p&gt;
&lt;p&gt;This has now been fixed, and restic now includes the error text in JSON output.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4945](https://github.com/restic/restic/issues/4945) [#4946](https://github.com/restic/restic/pull/4946)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #4953: Correctly handle long paths on older Windows versions&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;On older Windows versions, like Windows Server 2012, restic 0.17.0 failed to back up files with long paths. This problem has now been resolved.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4953](https://github.com/restic/restic/issues/4953) [#4954](https://github.com/restic/restic/pull/4954)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #4957: Fix delayed cancellation of certain commands&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Since restic 0.17.0, some commands did not immediately respond to cancellation via Ctrl-C (SIGINT) and continued running for a short period. The most affected commands were &lt;code&gt;diff&lt;/code&gt;,&lt;code&gt;find&lt;/code&gt;, &lt;code&gt;ls&lt;/code&gt;, &lt;code&gt;stats&lt;/code&gt; and &lt;code&gt;rewrite&lt;/code&gt;. This is now resolved.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4957](https://github.com/restic/restic/issues/4957) [#4960](https://github.com/restic/restic/pull/4960)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #4958: Don't ignore metadata-setting errors during restore&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Previously, restic used to ignore errors when setting timestamps, attributes, or file modes during a restore. It now reports those errors, except for permission related errors when running without root privileges.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4958](https://github.com/restic/restic/pull/4958)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #4969: Correctly restore timestamp for files with resource forks on macOS&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;On macOS, timestamps were not restored for files with resource forks. This has now been fixed.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4969](https://github.com/restic/restic/issues/4969) [#5006](https://github.com/restic/restic/pull/5006)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #4975: Prevent &lt;code&gt;backup --stdin-from-command&lt;/code&gt; from panicking&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic would previously crash if &lt;code&gt;--stdin-from-command&lt;/code&gt; was specified without providing a command. This issue has now been fixed.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4975](https://github.com/restic/restic/issues/4975) [#4976](https://github.com/restic/restic/pull/4976)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #4980: Skip extended attribute processing on unsupported Windows volumes&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;With restic 0.17.0, backups of certain Windows paths, such as network drives, failed due to errors while fetching extended attributes.&lt;/p&gt;
&lt;p&gt;Restic now skips extended attribute processing for volumes where they are not supported.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4955](https://github.com/restic/restic/issues/4955) [#4950](https://github.com/restic/restic/issues/4950) [#4980](https://github.com/restic/restic/pull/4980) [#4998](https://github.com/restic/restic/pull/4998)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #5004: Fix spurious "A Required Privilege Is Not Held by the Client" error&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;On Windows, creating a backup could sometimes trigger the following error:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;error: nodeFromFileInfo [...]: get named security info failed with: a required privilege is not held by the client.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;This has now been fixed.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5004](https://github.com/restic/restic/issues/5004) [#5019](https://github.com/restic/restic/pull/5019)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #5005: Fix rare failures to retry locking a repository&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic 0.17.0 could in rare cases fail to retry locking a repository if one of the lock files failed to load, resulting in the error:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;unable to create lock in backend: circuit breaker open for file &amp;lt;lock/1234567890&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;This issue has now been addressed. The error handling now properly retries the locking operation. In addition, restic waits a few seconds between locking retries to increase chances of successful locking.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5005](https://github.com/restic/restic/issues/5005) [#5011](https://github.com/restic/restic/pull/5011) [#5012](https://github.com/restic/restic/pull/5012)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #5018: Improve HTTP/2 support for REST backend&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If &lt;code&gt;rest-server&lt;/code&gt; tried to gracefully shut down an HTTP/2 connection still in use by the client, it could result in the following error:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;http2: Transport: cannot retry err [http2: Transport received Server's graceful shutdown GOAWAY] after Request.Body was written; define Request.GetBody to avoid this error&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;This issue has now been resolved.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5018](https://github.com/restic/restic/pull/5018) https://forum.restic.net/t/receiving-http2-goaway-messages-with-windows-restic-v0-17-0/8367
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Change #4953: Also back up files with incomplete metadata&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If restic failed to read extended metadata for a file or folder during a backup, then the file or folder was not included in the resulting snapshot. Instead, a warning message was printed along with returning exit code 3 once the backup was finished.&lt;/p&gt;
&lt;p&gt;Now, restic also includes items for which the extended metadata could not be read in a snapshot. The warning message has been updated to:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;incomplete metadata for /path/to/file: &amp;lt;details about error&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4953](https://github.com/restic/restic/issues/4953) [#4977](https://github.com/restic/restic/pull/4977)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4795: Display progress bar for &lt;code&gt;restore --verify&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;When the &lt;code&gt;restore&lt;/code&gt; command is run with &lt;code&gt;--verify&lt;/code&gt;, it now displays a progress bar while the verification step is running. The progress bar is not shown when the &lt;code&gt;--json&lt;/code&gt; flag is specified.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4795](https://github.com/restic/restic/issues/4795) [#4989](https://github.com/restic/restic/pull/4989)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4934: Automatically clear removed snapshots from cache&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Previously, restic only removed snapshots from the cache on the host where the &lt;code&gt;forget&lt;/code&gt; command was executed. On other hosts that use the same repository, the old snapshots remained in the cache.&lt;/p&gt;
&lt;p&gt;Restic now automatically clears old snapshots from the local cache of the current host.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4934](https://github.com/restic/restic/issues/4934) [#4981](https://github.com/restic/restic/pull/4981)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4944: Print JSON-formatted errors during &lt;code&gt;restore --json&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic used to print any &lt;code&gt;restore&lt;/code&gt; errors directly to the console as freeform text messages, even when using the &lt;code&gt;--json&lt;/code&gt; option.&lt;/p&gt;
&lt;p&gt;Now, when &lt;code&gt;--json&lt;/code&gt; is specified, restic prints them as JSON formatted messages.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4944](https://github.com/restic/restic/issues/4944) [#4946](https://github.com/restic/restic/pull/4946)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4959: Return exit code 12 for "bad password" errors&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic now returns exit code 12 when it cannot open the repository due to an incorrect password.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4959](https://github.com/restic/restic/pull/4959)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4970: Make timeout for stuck requests customizable&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic monitors connections to the backend to detect stuck requests. If a request does not return any data within five minutes, restic assumes the request is stuck and retries it. However, for large repositories this timeout might be insufficient to collect a list of all files, causing the following error:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;List(data) returned error, retrying after 1s: [...]: request timeout&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;It is now possible to increase the timeout using the &lt;code&gt;--stuck-request-timeout&lt;/code&gt; option.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4970](https://github.com/restic/restic/issues/4970) [#5014](https://github.com/restic/restic/pull/5014)
&lt;/code&gt;&lt;/pre&gt;</content>
    <link href="https://github.com/restic/restic/releases/tag/v0.17.1" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/restic/restic/releases/tag/v0.17.2</id>
    <title>New release for restic: restic 0.17.2</title>
    <updated>2024-10-27T11:55:08-04:00</updated>
    <author>
      <name>restic/restic</name>
    </author>
    <content>&lt;h1&gt;Changelog for restic 0.17.2 (2024-10-27)&lt;/h1&gt;
&lt;p&gt;The following sections list the changes in restic 0.17.2 relevant to restic users. The changes are ordered by importance.&lt;/p&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/4004"&gt;#4004&lt;/a&gt;: Support container-level SAS/SAT tokens for Azure backend&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/pull/5047"&gt;#5047&lt;/a&gt;: Resolve potential error during concurrent cache cleanup&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/5050"&gt;#5050&lt;/a&gt;: Return error if &lt;code&gt;tag&lt;/code&gt; fails to lock repository&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/pull/5057"&gt;#5057&lt;/a&gt;: Exclude irregular files from backups&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/5063"&gt;#5063&lt;/a&gt;: Correctly &lt;code&gt;backup&lt;/code&gt; extended metadata when using VSS on Windows&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Details&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #4004: Support container-level SAS/SAT tokens for Azure backend&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic previously expected SAS/SAT tokens to be generated at the account level, which prevented tokens created at the container level from being used to initialize a repository. This caused an error when attempting to initialize a repository with container-level tokens.&lt;/p&gt;
&lt;p&gt;Restic now supports both account-level and container-level SAS/SAT tokens for initializing a repository.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4004](https://github.com/restic/restic/issues/4004) [#5093](https://github.com/restic/restic/pull/5093)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #5047: Resolve potential error during concurrent cache cleanup&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;When multiple restic processes ran concurrently, they could compete to remove obsolete snapshots from the local backend cache, sometimes leading to a "no such file or directory" error. Restic now suppresses this error to prevent issues during cache cleanup.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5047](https://github.com/restic/restic/pull/5047)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #5050: Return error if &lt;code&gt;tag&lt;/code&gt; fails to lock repository&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Since restic 0.17.0, the &lt;code&gt;tag&lt;/code&gt; command did not return an error when it failed to open or lock the repository. This issue has now been fixed.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5050](https://github.com/restic/restic/issues/5050) [#5056](https://github.com/restic/restic/pull/5056)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #5057: Exclude irregular files from backups&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Since restic 0.17.1, files with the type &lt;code&gt;irregular&lt;/code&gt; could mistakenly be included in snapshots, especially when backing up special file types on Windows that restic cannot process. This issue has now been fixed.&lt;/p&gt;
&lt;p&gt;Previously, this bug caused the &lt;code&gt;check&lt;/code&gt; command to report errors like the following one:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;tree 12345678[...]: node "example.zip" with invalid type "irregular"&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;To repair affected snapshots, upgrade to restic 0.17.2 and run:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;restic repair snapshots --forget&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;This will remove the &lt;code&gt;irregular&lt;/code&gt; files from the snapshots (creating a new snapshot ID for each of the affected snapshots).&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5057](https://github.com/restic/restic/pull/5057) https://forum.restic.net/t/errors-found-by-check-1-invalid-type-irregular-2-ciphertext-verification-failed/8447/2
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #5063: Correctly &lt;code&gt;backup&lt;/code&gt; extended metadata when using VSS on Windows&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;On Windows, when creating a backup with the &lt;code&gt;--use-fs-snapshot&lt;/code&gt; option, restic read extended metadata from the original filesystem path instead of from the snapshot. This could result in errors if files were removed during the backup process.&lt;/p&gt;
&lt;p&gt;This issue has now been resolved.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5063](https://github.com/restic/restic/issues/5063) [#5097](https://github.com/restic/restic/pull/5097) [#5099](https://github.com/restic/restic/pull/5099)
&lt;/code&gt;&lt;/pre&gt;</content>
    <link href="https://github.com/restic/restic/releases/tag/v0.17.2" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/restic/restic/releases/tag/v0.17.3</id>
    <title>New release for restic: restic 0.17.3</title>
    <updated>2024-11-08T14:52:25-05:00</updated>
    <author>
      <name>restic/restic</name>
    </author>
    <content>&lt;h1&gt;Changelog for restic 0.17.3 (2024-11-08)&lt;/h1&gt;
&lt;p&gt;The following sections list the changes in restic 0.17.3 relevant to restic users. The changes are ordered by importance.&lt;/p&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/4971"&gt;#4971&lt;/a&gt;: Fix unusable &lt;code&gt;mount&lt;/code&gt; on macOS Sonoma&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/5003"&gt;#5003&lt;/a&gt;: Fix metadata errors during backup of removable disks on Windows&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/pull/5101"&gt;#5101&lt;/a&gt;: Do not retry load/list operation if SFTP connection is broken&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/5107"&gt;#5107&lt;/a&gt;: Fix metadata error on Windows for backups using VSS&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/pull/5096"&gt;#5096&lt;/a&gt;: Allow &lt;code&gt;prune --dry-run&lt;/code&gt; without lock&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Details&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #4971: Fix unusable &lt;code&gt;mount&lt;/code&gt; on macOS Sonoma&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;On macOS Sonoma when using FUSE-T, it was not possible to access files in a mounted repository. This issue is now resolved.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4971](https://github.com/restic/restic/issues/4971) [#5048](https://github.com/restic/restic/pull/5048)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #5003: Fix metadata errors during backup of removable disks on Windows&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Since restic 0.17.0, backing up removable disks on Windows could report errors with retrieving metadata like shown below.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;error: incomplete metadata for d:\filename: get named security info failed with: Access is denied.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;This has now been fixed.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5003](https://github.com/restic/restic/issues/5003) [#5123](https://github.com/restic/restic/pull/5123) https://forum.restic.net/t/backing-up-a-folder-from-a-veracrypt-volume-brings-up-errors-since-restic-v17-0/8444
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #5101: Do not retry load/list operation if SFTP connection is broken&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;When using restic with the SFTP backend, backend operations that load a file or list files were retried even if the SFTP connection was broken. This has now been fixed.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5101](https://github.com/restic/restic/pull/5101) https://forum.restic.net/t/restic-hanging-on-backup/8559
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #5107: Fix metadata error on Windows for backups using VSS&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Since restic 0.17.2, when creating a backup on Windows using &lt;code&gt;--use-fs-snapshot&lt;/code&gt;, restic would report an error like the following:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;error: incomplete metadata for C:\: get EA failed while opening file handle for path \\?\GLOBALROOT\Device\HarddiskVolumeShadowCopyXX\, with: The process cannot access the file because it is being used by another process.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;This has now been fixed by correctly handling paths that refer to volume shadow copy snapshots.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5107](https://github.com/restic/restic/issues/5107) [#5110](https://github.com/restic/restic/pull/5110) [#5112](https://github.com/restic/restic/pull/5112)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #5096: Allow &lt;code&gt;prune --dry-run&lt;/code&gt; without lock&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;prune --dry-run --no-lock&lt;/code&gt; now allows performing a dry-run without locking the repository. Note that if the repository is modified concurrently, &lt;code&gt;prune&lt;/code&gt; may return inaccurate statistics or errors.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5096](https://github.com/restic/restic/pull/5096)
&lt;/code&gt;&lt;/pre&gt;</content>
    <link href="https://github.com/restic/restic/releases/tag/v0.17.3" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/restic/restic/releases/tag/v0.18.0</id>
    <title>New release for restic: restic 0.18.0</title>
    <updated>2025-03-27T15:34:28-04:00</updated>
    <author>
      <name>restic/restic</name>
    </author>
    <content>&lt;h1&gt;Changelog for restic 0.18.0 (2025-03-27)&lt;/h1&gt;
&lt;p&gt;The following sections list the changes in restic 0.18.0 relevant to restic users. The changes are ordered by importance.&lt;/p&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Sec &lt;a href="https://github.com/restic/restic/issues/5291"&gt;#5291&lt;/a&gt;: Mitigate attack on content-defined chunking algorithm&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/1843"&gt;#1843&lt;/a&gt;: Correctly restore long filepaths' timestamp on old Windows&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/2165"&gt;#2165&lt;/a&gt;: Ignore disappeared backup source files&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/pull/5153"&gt;#5153&lt;/a&gt;: Include root tree when searching using &lt;code&gt;find --tree&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/5169"&gt;#5169&lt;/a&gt;: Prevent Windows VSS event log 8194 warnings for backup with fs snapshot&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/pull/5212"&gt;#5212&lt;/a&gt;: Fix duplicate data handling in &lt;code&gt;prune --max-unused&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/pull/5249"&gt;#5249&lt;/a&gt;: Fix creation of oversized index by &lt;code&gt;repair index --read-all-packs&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Fix &lt;a href="https://github.com/restic/restic/issues/5259"&gt;#5259&lt;/a&gt;: Fix rare crash in command output&lt;/li&gt;
&lt;li&gt;Chg &lt;a href="https://github.com/restic/restic/pull/4938"&gt;#4938&lt;/a&gt;: Update dependencies and require Go 1.23 or newer&lt;/li&gt;
&lt;li&gt;Chg &lt;a href="https://github.com/restic/restic/pull/5162"&gt;#5162&lt;/a&gt;: Promote feature flags&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/1378"&gt;#1378&lt;/a&gt;: Add JSON support to &lt;code&gt;check&lt;/code&gt; command&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/2511"&gt;#2511&lt;/a&gt;: Support generating shell completions to stdout&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/3697"&gt;#3697&lt;/a&gt;: Allow excluding online-only cloud files (e.g. OneDrive)&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4179"&gt;#4179&lt;/a&gt;: Add &lt;code&gt;sort&lt;/code&gt; option to &lt;code&gt;ls&lt;/code&gt; command&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4433"&gt;#4433&lt;/a&gt;: Change default sort order for &lt;code&gt;find&lt;/code&gt; output&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4521"&gt;#4521&lt;/a&gt;: Add support for Microsoft Blob Storage access tiers&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4942"&gt;#4942&lt;/a&gt;: Add snapshot summary statistics to rewritten snapshots&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4948"&gt;#4948&lt;/a&gt;: Format exit errors as JSON when requested&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/4983"&gt;#4983&lt;/a&gt;: Add SLSA provenance to GHCR container images&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/pull/5054"&gt;#5054&lt;/a&gt;: Enable compression for ZIP archives in &lt;code&gt;dump&lt;/code&gt; command&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/5081"&gt;#5081&lt;/a&gt;: Add retry mechanism for loading repository config&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/5089"&gt;#5089&lt;/a&gt;: Allow including/excluding extended file attributes during &lt;code&gt;restore&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/5092"&gt;#5092&lt;/a&gt;: Show count of deleted files and directories during &lt;code&gt;restore&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/5109"&gt;#5109&lt;/a&gt;: Make small pack size configurable for &lt;code&gt;prune&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/pull/5119"&gt;#5119&lt;/a&gt;: Add start and end timestamps to &lt;code&gt;backup&lt;/code&gt; JSON output&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/5131"&gt;#5131&lt;/a&gt;: Add DragonFlyBSD support&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/5137"&gt;#5137&lt;/a&gt;: Make &lt;code&gt;tag&lt;/code&gt; command print which snapshots were modified&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/pull/5141"&gt;#5141&lt;/a&gt;: Provide clear error message if AZURE_ACCOUNT_NAME is not set&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/pull/5173"&gt;#5173&lt;/a&gt;: Add experimental S3 cold storage support&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/5174"&gt;#5174&lt;/a&gt;: Add xattr support for NetBSD 10+&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/pull/5251"&gt;#5251&lt;/a&gt;: Improve retry handling for flaky &lt;code&gt;rclone&lt;/code&gt; backends&lt;/li&gt;
&lt;li&gt;Enh &lt;a href="https://github.com/restic/restic/issues/52897"&gt;#52897&lt;/a&gt;: Make &lt;code&gt;recover&lt;/code&gt; automatically rebuild index when needed&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Details&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Security #5291: Mitigate attack on content-defined chunking algorithm&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic uses &lt;a href="https://restic.net/blog/2015-09-12/restic-foundation1-cdc/"&gt;Rabin Fingerprints&lt;/a&gt; for its content-defined chunker. The algorithm relies on a secret polynomial to split files into chunks.&lt;/p&gt;
&lt;p&gt;As shown in the paper "&lt;a href="https://eprint.iacr.org/2025/532.pdf"&gt;Chunking Attacks on File Backup Services using Content-Defined Chunking&lt;/a&gt;" by Boris Alexeev, Colin Percival and Yan X Zhang, an attacker that can observe chunk sizes for a known file can derive the secret polynomial. Knowledge of the polynomial might in some cases allow an attacker to check whether certain large files are stored in a repository.&lt;/p&gt;
&lt;p&gt;A practical attack is nevertheless hard as restic merges multiple chunks into opaque pack files and by default processes multiple files in parallel. This likely prevents an attacker from matching pack files to the attacker-known file and thereby prevents the attack.&lt;/p&gt;
&lt;p&gt;Despite the low chances of a practical attack, restic now has added mitigation that randomizes how chunks are assembled into pack files. This prevents attackers from guessing which chunks are part of a pack file and thereby prevents learning the chunk sizes.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5291](https://github.com/restic/restic/issues/5291) [#5295](https://github.com/restic/restic/pull/5295)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #1843: Correctly restore long filepaths' timestamp on old Windows&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;restore&lt;/code&gt; command now correctly restores timestamps for files with paths longer than 256 characters on Windows versions prior to Windows 10 1607.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#1843](https://github.com/restic/restic/issues/1843) [#5061](https://github.com/restic/restic/pull/5061)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #2165: Ignore disappeared backup source files&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;backup&lt;/code&gt; command now quietly skips files that are removed between directory listing and backup, instead of printing errors like:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;error: lstat /some/file/name: no such file or directory&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#2165](https://github.com/restic/restic/issues/2165) [#3098](https://github.com/restic/restic/issues/3098) [#5143](https://github.com/restic/restic/pull/5143) [#5145](https://github.com/restic/restic/pull/5145)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #5153: Include root tree when searching using &lt;code&gt;find --tree&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;restic find --tree&lt;/code&gt; command did not find trees referenced by &lt;code&gt;restic snapshot --json&lt;/code&gt;. It now correctly includes the root tree when searching.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5153](https://github.com/restic/restic/pull/5153)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #5169: Prevent Windows VSS event log 8194 warnings for backup with fs snapshot&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;When running &lt;code&gt;backup&lt;/code&gt; with the &lt;code&gt;--use-fs-snapshot&lt;/code&gt; option in Windows with admin rights, event logs like&lt;/p&gt;
&lt;p&gt;```
   Volume Shadow Copy Service error: Unexpected error querying for the IVssWriterCallback interface.  hr = 0x80070005, Access is denied.
   . This is often caused by incorrect security settings in either the writer or requester process.&lt;/p&gt;
&lt;p&gt;Operation:
      Gathering Writer Data&lt;/p&gt;
&lt;p&gt;Context:
      Writer Class Id: {e8132975-6f93-4464-a53e-1050253ae220}
      Writer Name: System Writer
      Writer Instance ID: {54b151ac-d27d-4628-9cb0-2bc40959f50f}
   ```&lt;/p&gt;
&lt;p&gt;Are created several times even though the backup itself succeeds. This has now been fixed.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5169](https://github.com/restic/restic/issues/5169) [#5170](https://github.com/restic/restic/pull/5170) https://forum.restic.net/t/windows-shadow-copy-snapshot-vss-unexpected-provider-error/3674/2
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #5212: Fix duplicate data handling in &lt;code&gt;prune --max-unused&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;prune --max-unused size&lt;/code&gt; command did not correctly account for duplicate data. If a repository contained a large amount of duplicate data, this could previously result in pruning too little data. This has now been fixed.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5212](https://github.com/restic/restic/pull/5212) https://forum.restic.net/t/restic-not-obeying-max-unused-parameter-on-prune/8879
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #5249: Fix creation of oversized index by &lt;code&gt;repair index --read-all-packs&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Since restic 0.17.0, the new index created by &lt;code&gt;repair index --read-all-packs&lt;/code&gt; was written as a single large index. This significantly increased memory usage while loading the index.&lt;/p&gt;
&lt;p&gt;The index is now correctly split into multiple smaller indexes, and &lt;code&gt;repair index&lt;/code&gt; now also automatically splits oversized indexes.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5249](https://github.com/restic/restic/pull/5249)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Bugfix #5259: Fix rare crash in command output&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Some commands could in rare cases crash when trying to print status messages and request retries at the same time, resulting in an error like the following:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;panic: runtime error: slice bounds out of range [468:156]
   [...]
   github.com/restic/restic/internal/ui/termstatus.(*lineWriter).Write(...)
    /restic/internal/ui/termstatus/stdio_wrapper.go:36 +0x136&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;This has now been fixed.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5259](https://github.com/restic/restic/issues/5259) [#5300](https://github.com/restic/restic/pull/5300)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Change #4938: Update dependencies and require Go 1.23 or newer&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We have updated all dependencies. Restic now requires Go 1.23 or newer to build.&lt;/p&gt;
&lt;p&gt;This also disables support for TLS versions older than TLS 1.2. On Windows, restic now requires at least Windows 10 or Windows Server 2016. On macOS, restic now requires at least macOS 11 Big Sur.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4938](https://github.com/restic/restic/pull/4938)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Change #5162: Promote feature flags&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;deprecate-legacy-index&lt;/code&gt;, &lt;code&gt;deprecate-s3-legacy-layout&lt;/code&gt;, &lt;code&gt;explicit-s3-anonymous-auth&lt;/code&gt; and &lt;code&gt;safe-forget-keep-tags&lt;/code&gt; features are now stable and can no longer be disabled. The corresponding feature flags will be removed in restic 0.19.0.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5162](https://github.com/restic/restic/pull/5162)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #1378: Add JSON support to &lt;code&gt;check&lt;/code&gt; command&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;check&lt;/code&gt; command now supports the &lt;code&gt;--json&lt;/code&gt; option to output all statistics in JSON format.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#1378](https://github.com/restic/restic/issues/1378) [#5194](https://github.com/restic/restic/pull/5194)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #2511: Support generating shell completions to stdout&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;generate&lt;/code&gt; command now supports using &lt;code&gt;-&lt;/code&gt; as the filename with the &lt;code&gt;--[shell]-completion&lt;/code&gt; option to write the generated output to stdout.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#2511](https://github.com/restic/restic/issues/2511) [#5053](https://github.com/restic/restic/pull/5053)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #3697: Allow excluding online-only cloud files (e.g. OneDrive)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic treated files synced using OneDrive Files On-Demand as though they were regular files. This caused issues with VSS and could cause OneDrive to download all files.&lt;/p&gt;
&lt;p&gt;Restic now allows the user to exclude these files when backing up with the &lt;code&gt;--exclude-cloud-files&lt;/code&gt; option.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#3697](https://github.com/restic/restic/issues/3697) [#4935](https://github.com/restic/restic/issues/4935) [#4990](https://github.com/restic/restic/pull/4990)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4179: Add &lt;code&gt;sort&lt;/code&gt; option to &lt;code&gt;ls&lt;/code&gt; command&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;ls -l&lt;/code&gt; command output can now be sorted using the new &lt;code&gt;--sort &amp;lt;field&amp;gt;&lt;/code&gt; option for the fields &lt;code&gt;name&lt;/code&gt;, &lt;code&gt;size&lt;/code&gt;, &lt;code&gt;time&lt;/code&gt; (same as &lt;code&gt;mtime&lt;/code&gt;), &lt;code&gt;mtime&lt;/code&gt;, &lt;code&gt;atime&lt;/code&gt;, &lt;code&gt;ctime&lt;/code&gt; and &lt;code&gt;extension&lt;/code&gt;. A &lt;code&gt;--reverse&lt;/code&gt; option is also available.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4179](https://github.com/restic/restic/issues/4179) [#5182](https://github.com/restic/restic/pull/5182)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4433: Change default sort order for &lt;code&gt;find&lt;/code&gt; output&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;find&lt;/code&gt; command now sorts snapshots from newest to oldest by default. The previous oldest-to-newest order can be restored using the new &lt;code&gt;--reverse&lt;/code&gt; option.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4433](https://github.com/restic/restic/issues/4433) [#5184](https://github.com/restic/restic/pull/5184)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4521: Add support for Microsoft Blob Storage access tiers&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The new &lt;code&gt;-o azure.access-tier=&amp;lt;tier&amp;gt;&lt;/code&gt; option allows specifying the access tier (&lt;code&gt;Hot&lt;/code&gt;, &lt;code&gt;Cool&lt;/code&gt; or &lt;code&gt;Cold&lt;/code&gt;) for objects created in Microsoft Blob Storage. If unspecified, the storage account's default tier is used.&lt;/p&gt;
&lt;p&gt;There is no official &lt;code&gt;Archive&lt;/code&gt; storage support in restic, use this option at your own risk. To restore any data, it is necessary to manually warm up the required data in the &lt;code&gt;Archive&lt;/code&gt; tier.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4521](https://github.com/restic/restic/issues/4521) [#5046](https://github.com/restic/restic/pull/5046)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4942: Add snapshot summary statistics to rewritten snapshots&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;rewrite&lt;/code&gt; command now supports a &lt;code&gt;--snapshot-summary&lt;/code&gt; option to add statistics data to snapshots. Only two fields in the summary will be non-zero: &lt;code&gt;TotalFilesProcessed&lt;/code&gt; and &lt;code&gt;TotalBytesProcessed&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;For snapshots rewritten using the &lt;code&gt;--exclude&lt;/code&gt; options, the summary statistics are updated accordingly.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4942](https://github.com/restic/restic/issues/4942) [#5185](https://github.com/restic/restic/pull/5185)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4948: Format exit errors as JSON when requested&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic now formats error messages as JSON when the &lt;code&gt;--json&lt;/code&gt; flag is used.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4948](https://github.com/restic/restic/issues/4948) [#4952](https://github.com/restic/restic/pull/4952)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #4983: Add SLSA provenance to GHCR container images&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic's GitHub Container Registry (GHCR) image build workflow now includes SLSA (Supply-chain Levels for Software Artifacts) provenance generation.&lt;/p&gt;
&lt;p&gt;Please see the restic documentation for more information about verifying SLSA provenance.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#4983](https://github.com/restic/restic/issues/4983) [#4999](https://github.com/restic/restic/pull/4999)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #5054: Enable compression for ZIP archives in &lt;code&gt;dump&lt;/code&gt; command&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;dump&lt;/code&gt; command now compresses ZIP archives using the DEFLATE algorithm, reducing the size of exported archives.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5054](https://github.com/restic/restic/pull/5054)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #5081: Add retry mechanism for loading repository config&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic now retries loading the repository config file when opening a repository. The &lt;code&gt;init&lt;/code&gt; command now also retries backend operations.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5081](https://github.com/restic/restic/issues/5081) [#5095](https://github.com/restic/restic/pull/5095)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #5089: Allow including/excluding extended file attributes during &lt;code&gt;restore&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;restore&lt;/code&gt; command now supports the &lt;code&gt;--exclude-xattr&lt;/code&gt; and &lt;code&gt;--include-xattr&lt;/code&gt; options to control which extended file attributes will be restored. By default, all attributes are restored.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5089](https://github.com/restic/restic/issues/5089) [#5129](https://github.com/restic/restic/pull/5129)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #5092: Show count of deleted files and directories during &lt;code&gt;restore&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;restore&lt;/code&gt; command now reports the number of deleted files and directories, both in the regular output and in the &lt;code&gt;files_deleted&lt;/code&gt; field of the JSON output.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5092](https://github.com/restic/restic/issues/5092) [#5100](https://github.com/restic/restic/pull/5100)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #5109: Make small pack size configurable for &lt;code&gt;prune&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;prune&lt;/code&gt; command now supports the &lt;code&gt;--repack-smaller-than&lt;/code&gt; option that allows repacking pack files smaller than a specified size.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5109](https://github.com/restic/restic/issues/5109) [#5183](https://github.com/restic/restic/pull/5183)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #5119: Add start and end timestamps to &lt;code&gt;backup&lt;/code&gt; JSON output&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The JSON output of the &lt;code&gt;backup&lt;/code&gt; command now includes &lt;code&gt;backup_start&lt;/code&gt; and &lt;code&gt;backup_end&lt;/code&gt; timestamps, containing the start and end time of the backup.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5119](https://github.com/restic/restic/pull/5119)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #5131: Add DragonFlyBSD support&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restic can now be compiled on DragonflyBSD.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5131](https://github.com/restic/restic/issues/5131) [#5138](https://github.com/restic/restic/pull/5138)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #5137: Make &lt;code&gt;tag&lt;/code&gt; command print which snapshots were modified&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;code&gt;tag&lt;/code&gt; command now outputs which snapshots were modified along with their new snapshot ID. The command supports the &lt;code&gt;--json&lt;/code&gt; option for machine-readable output.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5137](https://github.com/restic/restic/issues/5137) [#5144](https://github.com/restic/restic/pull/5144)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #5141: Provide clear error message if AZURE_ACCOUNT_NAME is not set&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If &lt;code&gt;AZURE_ACCOUNT_NAME&lt;/code&gt; was not set, commands related to an Azure repository would result in a misleading networking error. Restic now detect this and provides a clear warning that the variable is not defined.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5141](https://github.com/restic/restic/pull/5141)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #5173: Add experimental S3 cold storage support&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Introduce S3 backend options for transitioning pack files from cold to hot storage on S3 and S3-compatible providers. Note: this only works for the &lt;code&gt;prune&lt;/code&gt;, &lt;code&gt;copy&lt;/code&gt; and &lt;code&gt;restore&lt;/code&gt; commands for now.&lt;/p&gt;
&lt;p&gt;This experimental feature is gated behind the "s3-restore" feature flag.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#3202](https://github.com/restic/restic/issues/3202) [#2504](https://github.com/restic/restic/issues/2504) [#5173](https://github.com/restic/restic/pull/5173)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #5174: Add xattr support for NetBSD 10+&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Extended attribute support for &lt;code&gt;backup&lt;/code&gt; and &lt;code&gt;restore&lt;/code&gt; operations is now available on NetBSD version 10 and later.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5174](https://github.com/restic/restic/issues/5174) [#5180](https://github.com/restic/restic/pull/5180)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #5251: Improve retry handling for flaky &lt;code&gt;rclone&lt;/code&gt; backends&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Since restic 0.17.0, the backend retry mechanisms rely on backends correctly reporting when a file does not exist. This is not always the case for some &lt;code&gt;rclone&lt;/code&gt; backends, which caused restic to stop retrying after the first failure.&lt;/p&gt;
&lt;p&gt;For rclone, failed requests are now retried up to 5 times before giving up.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#5251](https://github.com/restic/restic/pull/5251)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Enhancement #52897: Make &lt;code&gt;recover&lt;/code&gt; automatically rebuild index when needed&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;When trying to recover data from an interrupted snapshot, it was previously necessary to manually run &lt;code&gt;repair index&lt;/code&gt; before runnning &lt;code&gt;recover&lt;/code&gt;. This now happens automatically so that only &lt;code&gt;recover&lt;/code&gt; is necessary.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[#52897](https://github.com/restic/restic/issues/52897) [#5296](https://github.com/restic/restic/pull/5296)
&lt;/code&gt;&lt;/pre&gt;</content>
    <link href="https://github.com/restic/restic/releases/tag/v0.18.0" rel="alternate"/>
  </entry>
</feed>
