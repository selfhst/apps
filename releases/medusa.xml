<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
  <id>https://selfh.st/apps</id>
  <title>Medusa Releases</title>
  <updated>2025-01-05T12:30:52.725380-05:00</updated>
  <author>
    <name>selfh.st</name>
    <email>contact@selfh.st</email>
  </author>
  <link href="https://selfh.st/apps" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <subtitle>Self-hosted software releases generated by selfh.st</subtitle>
  <entry>
    <id>https://github.com/medusajs/medusa/releases/tag/v2.0.7</id>
    <title>New release for Medusa: v2.0.7</title>
    <updated>2024-11-27T09:49:04-05:00</updated>
    <author>
      <name>medusajs/medusa</name>
    </author>
    <content>&lt;!-- 
![order-transfer](https://github.com/user-attachments/assets/e5c6b044-d100-4f30-b781-7dbde4216bbe)

# v2.0.7

This version introduces order transfers and new languages to Medusa Admin.

CMS_BREAK --&gt;

&lt;h2&gt;Highlights&lt;/h2&gt;
&lt;h3&gt;Order transfers&lt;/h3&gt;
&lt;p&gt;You can now transfer order ownership between customers. We've added UI support in three places:
- Order details page in Medusa Admin
- Customer details page (Order list) in Medusa Admin
- Self-serve in our Next.js and B2B starters&lt;/p&gt;
&lt;p&gt;The high-level flow is as follows:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Initiate transfer
&lt;code&gt;POST /admin/orders/:id/transfer  { customer_id: string }&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Send a request to generate a transfer token and emit an event with the order ID.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Event subscriber&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;A subscriber picks up the event and emails the order’s current customer with the token.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Accept Transfer&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Customer accepts the order transfer.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;POST /store/orders/:id/transfer/accept { token: string }&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;Product Module DML migration&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;[!WARNING]&lt;br /&gt;
Breaking changes (avoidable)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The Product module now uses our DML for data model definitions instead of MikroORM. This migration introduces improvements and fixes but results in breaking changes to some relationship APIs. These can be avoided through explicit configurations.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Required actions&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Relation ownership on &lt;code&gt;manyToMany&lt;/code&gt; relation&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Previously, the &lt;code&gt;manyToMany&lt;/code&gt; API inferred the owning side of relations based on the order of loading models. If the first-loaded model used &lt;code&gt;mappedBy&lt;/code&gt;, it became the owner. Now, ownership is determined by examining both sides of the relation, before defaulting to the old behavior. This change might lead to unexpected behavior, and we therefore recommend explicitly defining the owner. &lt;/p&gt;
&lt;p&gt;Explicitly define the owner using &lt;code&gt;joinColumn&lt;/code&gt;, &lt;code&gt;inverseJoinColumn&lt;/code&gt;, or &lt;code&gt;pivotTable&lt;/code&gt;:
&lt;code&gt;ts
const ProductVariant = model
  .define("ProductVariant", {
    id: model.id({ prefix: "variant" }).primaryKey(),
    ...
    options: model.manyToMany(() =&amp;gt; ProductOptionValue, {
      pivotTable: "product_variant_option",
      mappedBy: "variants",
      joinColumn: "variant_id",
      inverseJoinColumn: "option_value_id",
    }),
  })&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Pivot table naming&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Aside from the relation ownership, we have also updated how pivot table names are generated. &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Before&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;We used the model names in alphabetical order and pluralized the last one of them.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Now&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;We use the model's table names in alphabetical order and pluralize the last one of them.&lt;/p&gt;
&lt;p&gt;To avoid issues with your project, explicitly set &lt;code&gt;pivotTable&lt;/code&gt; in &lt;code&gt;manyToMany&lt;/code&gt; relations to match your existing table names:&lt;/p&gt;
&lt;p&gt;For example:
&lt;code&gt;ts
const user = model.define('User', () =&amp;gt; {
  addresses: model.manyToMany(() =&amp;gt; Address, { pivotTable: 'address_users' })
})&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;New languages&lt;/h3&gt;
&lt;p&gt;Our admin dashboard has been translated into Brazilian Portuguese, French, Thai, and Spanish.&lt;/p&gt;
&lt;h2&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;feat(dashboard): Allow setting a tooltip for disabled action items by @kasperkristensen in https://github.com/medusajs/medusa/pull/10234&lt;/li&gt;
&lt;li&gt;feat(dashboard, js-sdk): customer page transfer order + cancel request in timeline by @fPolic in https://github.com/medusajs/medusa/pull/10250&lt;/li&gt;
&lt;li&gt;feat: convert MikroORM entities to DML entities by @thetutlage in https://github.com/medusajs/medusa/pull/10043&lt;/li&gt;
&lt;li&gt;feat: add ptBR (Brazilian Portuguese) in translations by @DanSilva41 in https://github.com/medusajs/medusa/pull/10188&lt;/li&gt;
&lt;li&gt;feat: add Thai language support by @oDestroyeRo in https://github.com/medusajs/medusa/pull/10249&lt;/li&gt;
&lt;li&gt;feat: French translation V2 by @triplecasquette in #10301&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Bugs&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;fix: Fix product module creation example by @sradevski in https://github.com/medusajs/medusa/pull/10228&lt;/li&gt;
&lt;li&gt;fix: Inventory module schema by @olivermrbl in https://github.com/medusajs/medusa/pull/10262&lt;/li&gt;
&lt;li&gt;fix(dashboard): Add Metadata form to variant page by @kasperkristensen in https://github.com/medusajs/medusa/pull/10285&lt;/li&gt;
&lt;li&gt;fix(dashboard): Truncate long product organization tags by @kasperkristensen in https://github.com/medusajs/medusa/pull/10261&lt;/li&gt;
&lt;li&gt;fix(core-flows): aggregate payment status by @carlos-r-l-rodrigues in https://github.com/medusajs/medusa/pull/10278&lt;/li&gt;
&lt;li&gt;fix(dashboard): Align casing of fields in reset password event by @kasperkristensen in https://github.com/medusajs/medusa/pull/10313&lt;/li&gt;
&lt;li&gt;fix(dashboard): adjust transfer SVG for theme by @fPolic in https://github.com/medusajs/medusa/pull/10307&lt;/li&gt;
&lt;li&gt;fix(dashboard): Prevent product metadata form from throwing error by @kasperkristensen in #10312&lt;/li&gt;
&lt;li&gt;fix(utils): read dir recursive by @carlos-r-l-rodrigues in #10318&lt;/li&gt;
&lt;li&gt;fix(dashboard): Correct Spain provinces in country-states.ts by @anthid in #10264&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Documentation&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;docs: update injection zones for v2.0.5 by @shahednasser in https://github.com/medusajs/medusa/pull/10225&lt;/li&gt;
&lt;li&gt;docs: add details on updating a cart's customer by @shahednasser in https://github.com/medusajs/medusa/pull/10226&lt;/li&gt;
&lt;li&gt;docs: added section on medusa cloud by @shahednasser in https://github.com/medusajs/medusa/pull/10265&lt;/li&gt;
&lt;li&gt;docs-util: fix references generator by @shahednasser in https://github.com/medusajs/medusa/pull/10271&lt;/li&gt;
&lt;li&gt;docs-util: fix build errors by @shahednasser in https://github.com/medusajs/medusa/pull/10275&lt;/li&gt;
&lt;li&gt;docs: fixes to Medusa Cloud sections by @shahednasser in https://github.com/medusajs/medusa/pull/10270&lt;/li&gt;
&lt;li&gt;docs: changes for CLI tools by @shahednasser in https://github.com/medusajs/medusa/pull/10284&lt;/li&gt;
&lt;li&gt;docs: fix link to payment session by @shahednasser in https://github.com/medusajs/medusa/pull/10286&lt;/li&gt;
&lt;li&gt;docs: fix links in API reference workflows section by @shahednasser in https://github.com/medusajs/medusa/pull/10269&lt;/li&gt;
&lt;li&gt;docs: revise scheduled jobs by @shahednasser in https://github.com/medusajs/medusa/pull/10291&lt;/li&gt;
&lt;li&gt;docs: fix links in examples guide by @shahednasser in https://github.com/medusajs/medusa/pull/10296&lt;/li&gt;
&lt;li&gt;docs: revise workflows docs by @shahednasser in https://github.com/medusajs/medusa/pull/10294&lt;/li&gt;
&lt;li&gt;docs: fix link to medusa container by @shahednasser in https://github.com/medusajs/medusa/pull/10298&lt;/li&gt;
&lt;li&gt;docs: revise admin customization pages by @shahednasser in https://github.com/medusajs/medusa/pull/10297&lt;/li&gt;
&lt;li&gt;docs: clarify medusa_url in Stripe docs by @shahednasser in https://github.com/medusajs/medusa/pull/10305&lt;/li&gt;
&lt;li&gt;docs: update list of events by @shahednasser in https://github.com/medusajs/medusa/pull/10308&lt;/li&gt;
&lt;li&gt;docs: add resend integration guide by @shahednasser in https://github.com/medusajs/medusa/pull/10268&lt;/li&gt;
&lt;li&gt;docs: fix database URL in railway guide by @shahednasser in https://github.com/medusajs/medusa/pull/10311&lt;/li&gt;
&lt;li&gt;docs: fix updateProvider edit user's password example by @xqSimone in https://github.com/medusajs/medusa/pull/10253&lt;/li&gt;
&lt;li&gt;docs: Update Redis connection string instructions for Railway by @qbitdoge in https://github.com/medusajs/medusa/pull/10246&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Chores&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;chore: fix CI branch in test by @shahednasser in https://github.com/medusajs/medusa/pull/10274&lt;/li&gt;
&lt;li&gt;chore(dashboard): Add missing keys to i18n translation files by @kasperkristensen #10260&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;New Contributors&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;@DanSilva41 made their first contribution in https://github.com/medusajs/medusa/pull/10188&lt;/li&gt;
&lt;li&gt;@xqSimone made their first contribution in https://github.com/medusajs/medusa/pull/10253&lt;/li&gt;
&lt;li&gt;@qbitdoge made their first contribution in https://github.com/medusajs/medusa/pull/10246&lt;/li&gt;
&lt;li&gt;@anthid made their first contribution in https://github.com/medusajs/medusa/pull/10301&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Full Changelog&lt;/strong&gt;: https://github.com/medusajs/medusa/compare/v2.0.6...v2.0.7&lt;/p&gt;</content>
    <link href="https://github.com/medusajs/medusa/releases/tag/v2.0.7" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/medusajs/medusa/releases/tag/v2.1.0</id>
    <title>New release for Medusa: v2.1.0</title>
    <updated>2024-12-04T12:55:41-05:00</updated>
    <author>
      <name>medusajs/medusa</name>
    </author>
    <content>&lt;!-- 
![order-update](https://github.com/user-attachments/assets/40b24b05-d20c-4ab1-8d39-32a275e7e0a4)

# v2.1.0

This version improves order management with support for updating email, shipping address, and billing address.

CMS_BREAK --&gt;

&lt;h2&gt;Highlights&lt;/h2&gt;
&lt;h3&gt;Improved order management&lt;/h3&gt;
&lt;p&gt;We've improved our order management with support for updating email, shipping address, and billing address.&lt;/p&gt;
&lt;h3&gt;New languages&lt;/h3&gt;
&lt;p&gt;Our admin dashboard has been translated into Italian.&lt;/p&gt;
&lt;h3&gt;Support for check constraint in Data Model API&lt;/h3&gt;
&lt;p&gt;We've added support for Postgres check constraints in our Data Model API.&lt;/p&gt;
&lt;p&gt;For example:
&lt;code&gt;ts
const shippingMethod = model.define('ShippingMethod', {
  amount: model.bigNumber(),
})
.checks([
  (columns) =&amp;gt; `${columns.amount} &amp;gt;= 0`
])&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;DML Migrations&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;[!WARNING]&lt;br /&gt;
Schema changes&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;We've migrated our Pricing, User, and Auth modules to use our Data Model API. These migrations include minor changes to the database schema:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pricing module&lt;/strong&gt;
- Added column &lt;code&gt;operator&lt;/code&gt; to &lt;code&gt;price_rule&lt;/code&gt; table (defaults to &lt;code&gt;eq&lt;/code&gt;)
- Created index on &lt;code&gt;(operator)&lt;/code&gt; in &lt;code&gt;price_rule&lt;/code&gt; table
- Created index on &lt;code&gt;(price_id)&lt;/code&gt; in &lt;code&gt;price_rule&lt;/code&gt; table
- Created unique index on &lt;code&gt;(price_id, attribute, operator)&lt;/code&gt; in &lt;code&gt;price_rule&lt;/code&gt; table
- Changed type of &lt;code&gt;max_quantity&lt;/code&gt; column in &lt;code&gt;price&lt;/code&gt; table from numeric to integer
- Changed type of &lt;code&gt;min_quantity&lt;/code&gt; column in &lt;code&gt;price&lt;/code&gt; table from numeric to integer&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Auth module&lt;/strong&gt;
- Added column &lt;code&gt;deleted_at&lt;/code&gt; to &lt;code&gt;auth_identity&lt;/code&gt; table
- Added column &lt;code&gt;deleted_at&lt;/code&gt; to &lt;code&gt;provider_identity&lt;/code&gt; table 
- Created index on &lt;code&gt;(deleted_at)&lt;/code&gt; in &lt;code&gt;auth_identity&lt;/code&gt; table 
- Created index on &lt;code&gt;(deleted_at)&lt;/code&gt; in &lt;code&gt;provider_identity&lt;/code&gt; table &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;User module&lt;/strong&gt;
- Renamed unique index on &lt;code&gt;(email)&lt;/code&gt; in &lt;code&gt;invite&lt;/code&gt; table
- Renamed unique index on &lt;code&gt;(email)&lt;/code&gt; in &lt;code&gt;user&lt;/code&gt; table&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Required actions&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Run migrations to ensure your server functions as expected after upgrading to v2.1.0:
&lt;code&gt;npx medusa db:migrate&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;feat(pricing,utils,types): add operator field to price rule by @riqwan in https://github.com/medusajs/medusa/pull/10315&lt;/li&gt;
&lt;li&gt;feat(pricing, types): add price rule operators to price calculations by @riqwan in https://github.com/medusajs/medusa/pull/10350&lt;/li&gt;
&lt;li&gt;feat(core-flows,types,medusa): ability to update/create custom shipping prices by @riqwan in https://github.com/medusajs/medusa/pull/10368&lt;/li&gt;
&lt;li&gt;feat(core-flows,framework,medusa): list shipping options pass in cart as pricing context by @riqwan in https://github.com/medusajs/medusa/pull/10374&lt;/li&gt;
&lt;li&gt;refactor: migrate pricing entities to DML models by @thetutlage in https://github.com/medusajs/medusa/pull/10335&lt;/li&gt;
&lt;li&gt;feature: add support for check constraints in DML by @thetutlage in https://github.com/medusajs/medusa/pull/10391&lt;/li&gt;
&lt;li&gt;feat(core-flows,medusa,order,types): update orders by @fPolic in https://github.com/medusajs/medusa/pull/10373&lt;/li&gt;
&lt;li&gt;feat(admin, js-sdk, types): update order forms by @fPolic in https://github.com/medusajs/medusa/pull/10418&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Bugs&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;fix(medusa): remove request body type argument from cancel order transfer routes by @shahednasser in https://github.com/medusajs/medusa/pull/10327&lt;/li&gt;
&lt;li&gt;fix(product): change export name of ProductImage by @shahednasser in https://github.com/medusajs/medusa/pull/10326&lt;/li&gt;
&lt;li&gt;fix: Use the correct defaults for the invite token expiry by @sradevski in https://github.com/medusajs/medusa/pull/10344&lt;/li&gt;
&lt;li&gt;fix: do not initialize FKs to null by @thetutlage in https://github.com/medusajs/medusa/pull/10337&lt;/li&gt;
&lt;li&gt;fix(order): archive order status update by @fPolic in https://github.com/medusajs/medusa/pull/10340&lt;/li&gt;
&lt;li&gt;fix: do not rely on model loading order to find an implicit owner by @thetutlage in https://github.com/medusajs/medusa/pull/10360&lt;/li&gt;
&lt;li&gt;fix(ui,icons,ui-preset): Fix CodeBlock and Command components by @kasperkristensen in https://github.com/medusajs/medusa/pull/10369&lt;/li&gt;
&lt;li&gt;fix: Ensure tax lines are generated for all items and shipping methods in cart by @olivermrbl in https://github.com/medusajs/medusa/pull/10372&lt;/li&gt;
&lt;li&gt;fix(stock-location): Fix export of StockLocation module by @kasperkristensen in https://github.com/medusajs/medusa/pull/10406&lt;/li&gt;
&lt;li&gt;fix(dashboard): Fix broken number input in adjust inventory form by @kasperkristensen in https://github.com/medusajs/medusa/pull/10416&lt;/li&gt;
&lt;li&gt;fix(dashboard): Add default value to inventory item combobox by @kasperkristensen in https://github.com/medusajs/medusa/pull/10412&lt;/li&gt;
&lt;li&gt;fix(dashboard): Prevent language ptBR from breaking dashboard by @kasperkristensen in https://github.com/medusajs/medusa/pull/10422&lt;/li&gt;
&lt;li&gt;fix(framework): Ensure that CORS and Auth middleware is applied for routes only defined in middlewares.ts by @kasperkristensen in https://github.com/medusajs/medusa/pull/10339&lt;/li&gt;
&lt;li&gt;fix(dashboard): Add Shipping Profile metadata route by @kasperkristensen in https://github.com/medusajs/medusa/pull/10430&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Documentation&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;docs: update sanity guide + marketplace recipe to use permanentFailure by @shahednasser in https://github.com/medusajs/medusa/pull/10310&lt;/li&gt;
&lt;li&gt;docs: update details on retrieving nested categories by @shahednasser in https://github.com/medusajs/medusa/pull/10317&lt;/li&gt;
&lt;li&gt;docs: add note about actor_type in reset password event in v2.0.7 by @shahednasser in https://github.com/medusajs/medusa/pull/10322&lt;/li&gt;
&lt;li&gt;docs: update many-to-many docs by @shahednasser in https://github.com/medusajs/medusa/pull/10323&lt;/li&gt;
&lt;li&gt;docs: generate references manually by @shahednasser in https://github.com/medusajs/medusa/pull/10325&lt;/li&gt;
&lt;li&gt;docs: revise implement brand module by @shahednasser in https://github.com/medusajs/medusa/pull/10341&lt;/li&gt;
&lt;li&gt;docs: revised build custom features chapter by @shahednasser in https://github.com/medusajs/medusa/pull/10338&lt;/li&gt;
&lt;li&gt;docs: revise create brand workflow by @shahednasser in https://github.com/medusajs/medusa/pull/10346&lt;/li&gt;
&lt;li&gt;docs: changes to deployment + remove admin deployment guides by @shahednasser in https://github.com/medusajs/medusa/pull/10345&lt;/li&gt;
&lt;li&gt;docs: document permanentFailure by @shahednasser in https://github.com/medusajs/medusa/pull/10356&lt;/li&gt;
&lt;li&gt;docs: add note about retryInterval making workflow long-running by @shahednasser in https://github.com/medusajs/medusa/pull/10355&lt;/li&gt;
&lt;li&gt;docs: intro + basic chapter fixes by @shahednasser in https://github.com/medusajs/medusa/pull/10361&lt;/li&gt;
&lt;li&gt;docs: remove v2 branch of next js starter installation by @shahednasser in https://github.com/medusajs/medusa/pull/10402&lt;/li&gt;
&lt;li&gt;docs: add missing import to db operations documentation by @shahednasser in https://github.com/medusajs/medusa/pull/10390&lt;/li&gt;
&lt;li&gt;docs: revise brand API route by @shahednasser in https://github.com/medusajs/medusa/pull/10352&lt;/li&gt;
&lt;li&gt;docs-util: add user, pricing, and auth as modules with DML by @shahednasser in https://github.com/medusajs/medusa/pull/10423&lt;/li&gt;
&lt;li&gt;docs: fixes and improvements to Sanity guide by @shahednasser in https://github.com/medusajs/medusa/pull/10414&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Chores&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix(dml): DML default/nullable management by @adrien2p in https://github.com/medusajs/medusa/pull/10363&lt;/li&gt;
&lt;li&gt;chore(utils): Ensure DML name convention follow the same as the class  name for simplicity by @adrien2p in https://github.com/medusajs/medusa/pull/10370&lt;/li&gt;
&lt;li&gt;feat(auth): Migrate auth module to DML by @adrien2p in https://github.com/medusajs/medusa/pull/10387&lt;/li&gt;
&lt;li&gt;feat(user): Migrate user module to DML by @adrien2p in https://github.com/medusajs/medusa/pull/10389&lt;/li&gt;
&lt;li&gt;chore(workflows-sdk): add unit test by @carlos-r-l-rodrigues in https://github.com/medusajs/medusa/pull/10419&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Other Changes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;German language corrections by @pixelwiese in https://github.com/medusajs/medusa/pull/10394&lt;/li&gt;
&lt;li&gt;feat: added Italian translations by @MarcoSan19 in https://github.com/medusajs/medusa/pull/10362&lt;/li&gt;
&lt;li&gt;Fix French translation typos by @lucienbl in https://github.com/medusajs/medusa/pull/10348&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;New Contributors&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;@MarcoSan19 made their first contribution in https://github.com/medusajs/medusa/pull/10362&lt;/li&gt;
&lt;li&gt;@lucienbl made their first contribution in https://github.com/medusajs/medusa/pull/10348&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Full Changelog&lt;/strong&gt;: https://github.com/medusajs/medusa/compare/v2.0.7...v2.1.0&lt;/p&gt;</content>
    <link href="https://github.com/medusajs/medusa/releases/tag/v2.1.0" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/medusajs/medusa/releases/tag/v2.1.1</id>
    <title>New release for Medusa: v2.1.1</title>
    <updated>2024-12-10T08:21:44-05:00</updated>
    <author>
      <name>medusajs/medusa</name>
    </author>
    <content>&lt;!-- 
![free-shipping-starters](https://github.com/user-attachments/assets/7dd3fac0-d122-4fc2-aaac-24408e5728cd)

# v2.1.1

This version introduces shipping option rules with support for cart total ranges.

CMS_BREAK --&gt;

&lt;h2&gt;Highlights&lt;/h2&gt;
&lt;h3&gt;Shipping option rules&lt;/h3&gt;
&lt;p&gt;We've introduced support for pricing rules on shipping options. Initially, the feature allows you to define prices based on the cart item total. For example, you could have a free shipping option that is only available when the item total is above 100 EUR.&lt;/p&gt;
&lt;p&gt;Every time the cart is updated, e.g. with new items, we refresh the shipping methods to ensure the correct price is applied at all times.&lt;/p&gt;
&lt;p&gt;You'll find the new setting in the admin dashboard under "Settings &amp;gt; Locations &amp;amp; Shipping &amp;gt; View details &amp;gt; Edit prices (on shipping option)".&lt;/p&gt;
&lt;h3&gt;New languages&lt;/h3&gt;
&lt;p&gt;Our admin dashboard has been translated into Japanese.&lt;/p&gt;
&lt;h3&gt;DML Migrations&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;[!WARNING]&lt;br /&gt;
Schema changes&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;We've migrated our Cart, Sales Channel, API Key, Store, Workflow Engine, and Locking modules to use our Data Model API. These migrations include minor changes to the database schema, primarily around renaming indexes to respect our autogenerated naming conventions.&lt;/p&gt;
&lt;p&gt;Read more about each of the schema changes in the PRs below.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Changes to &lt;code&gt;hasOne&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;As part of our DML work, the behavior of &lt;code&gt;hasOne&lt;/code&gt; has been updated in use cases where it is only defined on one side of the relation. In these cases, the &lt;code&gt;mappedBy&lt;/code&gt; configuration of the &lt;code&gt;hasOne&lt;/code&gt; definition needs to be set to &lt;code&gt;undefined&lt;/code&gt; as it is not present on the other model.&lt;/p&gt;
&lt;p&gt;For example:
```ts
const email = model.define("email", {
   email: model.text(),
   isVerified: model.boolean(),
 })&lt;/p&gt;
&lt;p&gt;const user = model.define("user", {
   id: model.number(),
   username: model.text(),
   email: model.hasOne(() =&amp;gt; email, { mappedBy: undefined }), // &amp;lt;------------ Required config
 })
```&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Required actions&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Run migrations to ensure your server functions as expected after upgrading to v2.1.0:
&lt;code&gt;npx medusa db:migrate&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;feat: add support for defining hasOne with FK by @thetutlage in https://github.com/medusajs/medusa/pull/10441&lt;/li&gt;
&lt;li&gt;refactor: migrate cart module to DML by @thetutlage in https://github.com/medusajs/medusa/pull/10385&lt;/li&gt;
&lt;li&gt;refactor: migrate sales-channel to DML by @thetutlage in https://github.com/medusajs/medusa/pull/10452&lt;/li&gt;
&lt;li&gt;refactor: migrate api key module to DML by @thetutlage in https://github.com/medusajs/medusa/pull/10450&lt;/li&gt;
&lt;li&gt;feat(js-sdk): Make credentials configurable in SDK by @sradevski in https://github.com/medusajs/medusa/pull/10464&lt;/li&gt;
&lt;li&gt;refactor: migrate store module to DML by @thetutlage in https://github.com/medusajs/medusa/pull/10467&lt;/li&gt;
&lt;li&gt;feat(core-flows, types): update shipping methods upon cart ops by @riqwan in https://github.com/medusajs/medusa/pull/10382&lt;/li&gt;
&lt;li&gt;feat(dashboard): SO cart item total rules UI by @kasperkristensen in https://github.com/medusajs/medusa/pull/10386&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Bugs&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;fix(dashboard,types): Add missing Metadata form for Region domain and fix payload types by @kasperkristensen in https://github.com/medusajs/medusa/pull/10449&lt;/li&gt;
&lt;li&gt;fix(core/js-sdk) Add the credentials field in the fetch() only if supported by @sgirones in https://github.com/medusajs/medusa/pull/10446&lt;/li&gt;
&lt;li&gt;fix(dashboard): Cleanup unsafe accesses to possibly undefined values in order timeline by @kasperkristensen in https://github.com/medusajs/medusa/pull/10454&lt;/li&gt;
&lt;li&gt;fix(): Deleted default sales channel should be prevented by @adrien2p in https://github.com/medusajs/medusa/pull/10193&lt;/li&gt;
&lt;li&gt;fix(utils): DML one to one definition by @adrien2p in https://github.com/medusajs/medusa/pull/10415&lt;/li&gt;
&lt;li&gt;fix(workflows-sdk): name for when/then step by @carlos-r-l-rodrigues in https://github.com/medusajs/medusa/pull/10459&lt;/li&gt;
&lt;li&gt;fix(framework): add missing query type argument in request types by @shahednasser in https://github.com/medusajs/medusa/pull/10456&lt;/li&gt;
&lt;li&gt;fix(dashboard): Prevent sending off empty string as handle for product category by @kasperkristensen in https://github.com/medusajs/medusa/pull/10473&lt;/li&gt;
&lt;li&gt;fix(utils): avoid optional properties on graphql generated file by @carlos-r-l-rodrigues in https://github.com/medusajs/medusa/pull/10476&lt;/li&gt;
&lt;li&gt;fix(dashboard,types): Fix TS errors by @kasperkristensen in https://github.com/medusajs/medusa/pull/10457&lt;/li&gt;
&lt;li&gt;fix(promotion, core-flows): updating cart with removed promotion removes adjustments by @riqwan in https://github.com/medusajs/medusa/pull/10489&lt;/li&gt;
&lt;li&gt;fix(medusa): add query type argument to RequestWithContext by @shahednasser in https://github.com/medusajs/medusa/pull/10469&lt;/li&gt;
&lt;li&gt;fix(medusa): calculate sales channel availability correctly for variants by @srindom in https://github.com/medusajs/medusa/pull/10448&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Documentation&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;docs: add documentation for check constraints by @shahednasser in https://github.com/medusajs/medusa/pull/10425&lt;/li&gt;
&lt;li&gt;docs: add note about default owner table in many-to-many by @shahednasser in https://github.com/medusajs/medusa/pull/10426&lt;/li&gt;
&lt;li&gt;docs: generate references manually by @shahednasser in https://github.com/medusajs/medusa/pull/10438&lt;/li&gt;
&lt;li&gt;docs: revise extend create product by @shahednasser in https://github.com/medusajs/medusa/pull/10444&lt;/li&gt;
&lt;li&gt;docs: revise query linked records by @shahednasser in https://github.com/medusajs/medusa/pull/10447&lt;/li&gt;
&lt;li&gt;docs: fix links in extend product guide by @shahednasser in https://github.com/medusajs/medusa/pull/10472&lt;/li&gt;
&lt;li&gt;docs-util: support new query type argument by @shahednasser in https://github.com/medusajs/medusa/pull/10468&lt;/li&gt;
&lt;li&gt;docs: revise admin customization pages by @shahednasser in https://github.com/medusajs/medusa/pull/10466&lt;/li&gt;
&lt;li&gt;docs: revise last chapters of customizations by @shahednasser in https://github.com/medusajs/medusa/pull/10480&lt;/li&gt;
&lt;li&gt;docs: support detecting broken link cross-projects by @shahednasser in https://github.com/medusajs/medusa/pull/10483&lt;/li&gt;
&lt;li&gt;docs: fix self hosting deployments not showing by @shahednasser in https://github.com/medusajs/medusa/pull/10486&lt;/li&gt;
&lt;li&gt;docs: revise main docs outline by @shahednasser in https://github.com/medusajs/medusa/pull/10502&lt;/li&gt;
&lt;li&gt;docs: fix links to steps in workflow references by @shahednasser in https://github.com/medusajs/medusa/pull/10503&lt;/li&gt;
&lt;li&gt;docs-util: normalize RelationNullableModifier in model references by @shahednasser in https://github.com/medusajs/medusa/pull/10505&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Chores&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;chore(utils): DML#hasOne allow mappedBy to not be defined by @adrien2p in https://github.com/medusajs/medusa/pull/10442&lt;/li&gt;
&lt;li&gt;chore: locking-postgres provider dml by @carlos-r-l-rodrigues in https://github.com/medusajs/medusa/pull/10478&lt;/li&gt;
&lt;li&gt;chore(workflow-engine): Migrate to DML by @adrien2p in https://github.com/medusajs/medusa/pull/10477&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Other Changes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;feat: added Japanese translation by @hirotaka in https://github.com/medusajs/medusa/pull/10379&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;New Contributors&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;@sgirones made their first contribution in https://github.com/medusajs/medusa/pull/10446&lt;/li&gt;
&lt;li&gt;@hirotaka made their first contribution in https://github.com/medusajs/medusa/pull/10379&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Full Changelog&lt;/strong&gt;: https://github.com/medusajs/medusa/compare/v2.1.0...v2.1.1&lt;/p&gt;</content>
    <link href="https://github.com/medusajs/medusa/releases/tag/v2.1.1" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/medusajs/medusa/releases/tag/v2.1.2</id>
    <title>New release for Medusa: v2.1.2</title>
    <updated>2024-12-17T09:54:46-05:00</updated>
    <author>
      <name>medusajs/medusa</name>
    </author>
    <content>&lt;!-- 
![image](https://github.com/user-attachments/assets/f1e247a0-630f-4b7a-9524-81018f83f2c3)

# v2.1.2

This version patches an issue with the database type of tax rates in the Cart Module.

CMS_BREAK --&gt;

&lt;h2&gt;Highlights&lt;/h2&gt;
&lt;h3&gt;Breaking changes&lt;/h3&gt;
&lt;p&gt;The input shape of two core workflows have changed:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;updateLineItemInCartWorkflow&lt;/code&gt;
```diff
export interface UpdateLineItemInCartWorkflowInputDTO {&lt;/li&gt;
&lt;li&gt;cart_id: string&lt;/li&gt;
&lt;li&gt;item_id: string&lt;/li&gt;
&lt;li&gt;cart: CartDTO&lt;/li&gt;
&lt;li&gt;item: CartLineItemDTO
   update: Partial&lt;UpdateLineItemDTO&gt;
 }&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;- `addToCartWorkflow`&lt;/code&gt;diff
export interface AddToCartWorkflowInputDTO {
+   cart_id: string
-   cart: CartDTO
   items: CreateCartCreateLineItemDTO[]
 }
```&lt;/p&gt;
&lt;h3&gt;Patches a regression with the Cart Module&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;[!WARNING]&lt;br /&gt;
Schema changes&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In an earlier release, we migrated the data models of the Cart Module from MikroORM to our DML. As part of that migration, the tax &lt;code&gt;rate&lt;/code&gt; column on line item tax lines and shipping method tax lines was mistakenly changed from a numeric to an integer. This led to issues with tax rates with decimal points, as they would get rounded to the nearest integer.&lt;/p&gt;
&lt;p&gt;In this release, we are changing the &lt;code&gt;rate&lt;/code&gt; column to &lt;code&gt;real&lt;/code&gt; (or &lt;code&gt;float()&lt;/code&gt; in our DML) to be consistent with how tax rates are generally represented across the codebase. &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Required action&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Run migrations to ensure your server functions as expected after upgrading:
&lt;code&gt;npx medusa db:migrate&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;refactor: migration stock location module by @thetutlage in https://github.com/medusajs/medusa/pull/10471&lt;/li&gt;
&lt;li&gt;refactor: migrate promotion module by @thetutlage in https://github.com/medusajs/medusa/pull/10410&lt;/li&gt;
&lt;li&gt;feat(core-flows, dashboard, fulfillment, fulfillment-manual, utils, types): create shipping options with calculated prices by @fPolic in https://github.com/medusajs/medusa/pull/10495&lt;/li&gt;
&lt;li&gt;feat: Migrate customer module to DML by @thetutlage in https://github.com/medusajs/medusa/pull/10499&lt;/li&gt;
&lt;li&gt;feat(file-s3): Add support for IAM role authentication to file-s3 provider by @sradevski in https://github.com/medusajs/medusa/pull/10528&lt;/li&gt;
&lt;li&gt;feat: add support for float properties by @thetutlage in https://github.com/medusajs/medusa/pull/10551&lt;/li&gt;
&lt;li&gt;feat(medusa, core-flows, fulfillment): calculate SO price endpoint by @fPolic in https://github.com/medusajs/medusa/pull/10532&lt;/li&gt;
&lt;li&gt;Feat/tax dml by @thetutlage in https://github.com/medusajs/medusa/pull/10525&lt;/li&gt;
&lt;li&gt;feat(types,fulfillment): ability to delete a canceled fulfillment by @riqwan in https://github.com/medusajs/medusa/pull/10602&lt;/li&gt;
&lt;li&gt;feat(core-flows): calculate SO price on cart ops by @fPolic in https://github.com/medusajs/medusa/pull/10563&lt;/li&gt;
&lt;li&gt;feat(medusa,pricing): Cart pricing context with customer group by @riqwan in https://github.com/medusajs/medusa/pull/10579&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Bugs&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;fix(product): Only apply default order to products if user has not specified one by @kasperkristensen in https://github.com/medusajs/medusa/pull/10535&lt;/li&gt;
&lt;li&gt;fix(dashboard): Prevent fulfillment provider modal from re-rendering before form submission is complete by @kasperkristensen in https://github.com/medusajs/medusa/pull/10547&lt;/li&gt;
&lt;li&gt;breaking: pluralization rule for the info word by @thetutlage in https://github.com/medusajs/medusa/pull/10599&lt;/li&gt;
&lt;li&gt;fix(core-flows): use customer create workflow to reuse the emit event by @riqwan in https://github.com/medusajs/medusa/pull/10601&lt;/li&gt;
&lt;li&gt;fix(cart): tax rate data type by @carlos-r-l-rodrigues in https://github.com/medusajs/medusa/pull/10626&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Documentation&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;docs: documented fetchCredentials options of JS SDK by @shahednasser in https://github.com/medusajs/medusa/pull/10510&lt;/li&gt;
&lt;li&gt;docs: added restock notification guide by @shahednasser in https://github.com/medusajs/medusa/pull/10413&lt;/li&gt;
&lt;li&gt;docs: fix page title in reference pagesnot showing + refactor workflows reference by @shahednasser in https://github.com/medusajs/medusa/pull/10537&lt;/li&gt;
&lt;li&gt;docs: generate references manually for 2.1.1 by @shahednasser in https://github.com/medusajs/medusa/pull/10534&lt;/li&gt;
&lt;li&gt;docs: regenerate references for core flows by @shahednasser in https://github.com/medusajs/medusa/pull/10538&lt;/li&gt;
&lt;li&gt;docs: document when-then name by @shahednasser in https://github.com/medusajs/medusa/pull/10543&lt;/li&gt;
&lt;li&gt;docs: fix typo in code in module isolation documentation by @shahednasser in https://github.com/medusajs/medusa/pull/10546&lt;/li&gt;
&lt;li&gt;docs: revise recipe examples by @shahednasser in https://github.com/medusajs/medusa/pull/10545&lt;/li&gt;
&lt;li&gt;docs: revise architectural modules documentation by @shahednasser in https://github.com/medusajs/medusa/pull/10548&lt;/li&gt;
&lt;li&gt;chore: fixes to tsdocs + docs-util related to providers by @shahednasser in https://github.com/medusajs/medusa/pull/10555&lt;/li&gt;
&lt;li&gt;docs: fix bugs in API reference by @shahednasser in https://github.com/medusajs/medusa/pull/10557&lt;/li&gt;
&lt;li&gt;Nits by @MedusaNick in https://github.com/medusajs/medusa/pull/10558&lt;/li&gt;
&lt;li&gt;docs: fix imports in createBrandStep by @shahednasser in https://github.com/medusajs/medusa/pull/10567&lt;/li&gt;
&lt;li&gt;docs: clarify that stripe module provider is available in application by @shahednasser in https://github.com/medusajs/medusa/pull/10577&lt;/li&gt;
&lt;li&gt;docs: add documentation on sending requests to custom routes with JS SDK by @shahednasser in https://github.com/medusajs/medusa/pull/10582&lt;/li&gt;
&lt;li&gt;docs: updates to contribution guidelines by @shahednasser in https://github.com/medusajs/medusa/pull/10578&lt;/li&gt;
&lt;li&gt;docs: document many-to-many with extra columns by @shahednasser in https://github.com/medusajs/medusa/pull/10586&lt;/li&gt;
&lt;li&gt;docs: improve examples in module link direction by @shahednasser in https://github.com/medusajs/medusa/pull/10590&lt;/li&gt;
&lt;li&gt;docs: add section on updating medusa by @shahednasser in https://github.com/medusajs/medusa/pull/10589&lt;/li&gt;
&lt;li&gt;docs: document alternatives for conditional operators by @shahednasser in https://github.com/medusajs/medusa/pull/10588&lt;/li&gt;
&lt;li&gt;docs-util: support @version tag by @shahednasser in https://github.com/medusajs/medusa/pull/10591&lt;/li&gt;
&lt;li&gt;chore: fix docs freshness check action by @shahednasser in https://github.com/medusajs/medusa/pull/10592&lt;/li&gt;
&lt;li&gt;docs: add pivotTable in digital product recipe by @shahednasser in https://github.com/medusajs/medusa/pull/10605&lt;/li&gt;
&lt;li&gt;docs: add customize stripe integration in next.js guide by @shahednasser in https://github.com/medusajs/medusa/pull/10583&lt;/li&gt;
&lt;li&gt;docs: small wording fix by @shahednasser in https://github.com/medusajs/medusa/pull/10616&lt;/li&gt;
&lt;li&gt;docs: remove unnecessary log by @shahednasser in https://github.com/medusajs/medusa/pull/10619&lt;/li&gt;
&lt;li&gt;docs: add stripe events to provider guide by @shahednasser in https://github.com/medusajs/medusa/pull/10618&lt;/li&gt;
&lt;li&gt;docs: add example of Table component with pagination by @shahednasser in https://github.com/medusajs/medusa/pull/10621&lt;/li&gt;
&lt;li&gt;docs: fix expanding of custom relations in customer and product category routes by @shahednasser in https://github.com/medusajs/medusa/pull/10620&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Chores&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;chore(payment): Payment module DML by @carlos-r-l-rodrigues in https://github.com/medusajs/medusa/pull/10553&lt;/li&gt;
&lt;li&gt;chore: small tsdoc update to dml float property. by @shahednasser in https://github.com/medusajs/medusa/pull/10576&lt;/li&gt;
&lt;li&gt;chore(inventory): convert to dml by @carlos-r-l-rodrigues in https://github.com/medusajs/medusa/pull/10569&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Other Changes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;feat: added Ukrainian translations by @Avia-Code in https://github.com/medusajs/medusa/pull/10536&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;New Contributors&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;@Avia-Code made their first contribution in https://github.com/medusajs/medusa/pull/10536&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Full Changelog&lt;/strong&gt;: https://github.com/medusajs/medusa/compare/v2.1.1...v2.1.2&lt;/p&gt;</content>
    <link href="https://github.com/medusajs/medusa/releases/tag/v2.1.2" rel="alternate"/>
  </entry>
  <entry>
    <id>https://github.com/medusajs/medusa/releases/tag/v2.1.3</id>
    <title>New release for Medusa: v2.1.3</title>
    <updated>2024-12-20T05:41:01-05:00</updated>
    <author>
      <name>medusajs/medusa</name>
    </author>
    <content>&lt;!-- 
![ui-routes](https://github.com/user-attachments/assets/1b6520b3-a81f-456a-8c08-d08b2e0cf6a6)

# v2.1.3

This release introduces calculated shipping option prices, nesting UI Routes under existing domains, and more.

CMS_BREAK --&gt;

&lt;h2&gt;Highlights&lt;/h2&gt;
&lt;h3&gt;Calculated shipping option price&lt;/h3&gt;
&lt;p&gt;This release introduces dynamically calculated shipping option prices, which comprise three key changes:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;- Admin support for creating dynamically priced options&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;When creating a shipping option, choose the "calculated" price type. Upon sending the request to create the option, our fulfillment module verifies if the provider and method support calculated prices.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;- New storefront endpoint to calculate shipping option prices&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;To display calculated prices on the storefront, use the endpoint below. Calculated shipping options do not include a price in the regular request to retrieve options for a cart. These are calculated separately–one request for each option.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;POST /store/shipping-options/:id/calculate
{ cart_id: "cart_1234", data: { ... } }&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Pass custom data in the &lt;code&gt;data&lt;/code&gt; property of the payload. The &lt;code&gt;data&lt;/code&gt; is passed down to the provider and can be used for the calculation, e.g. distance to destination.&lt;/p&gt;
&lt;p&gt;Our Next.js starter has been updated to include this feature. Check it out &lt;a href="https://github.com/medusajs/nextjs-starter-medusa/pull/436"&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;- Changes to the &lt;code&gt;addShippingMethodToCartWorkflow&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;When adding a calculated shipping option to a cart, the price is computed dynamically similarly to the calculation endpoint. &lt;/p&gt;
&lt;h3&gt;Module DML migrations&lt;/h3&gt;
&lt;p&gt;More core modules have been migrated from MikroORM to DML. These migrations come with non-breaking schema changes, primarily around index renaming and adding default timestamp columns. &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Removed orphan deletion&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Additionally, we've removed the default &lt;code&gt;orphanRemoval: true&lt;/code&gt; configuration from one-to-one relationships. This is a less aggressive approach to cascade removal, meaning that disconnecting entities in such a relation will not delete the "child" of the association. &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Required action&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Run migrations to ensure your server functions as expected after upgrading:
&lt;code&gt;npx medusa db:migrate&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;As part of migrating modules to use DML, we've uncovered a range of minor bugs (not affecting end-users) and improvements. You can read more about those in &lt;a href="https://github.com/medusajs/medusa/pull/10617"&gt;this PR&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Line items with custom prices&lt;/h3&gt;
&lt;p&gt;This release allows for custom prices on line items by decoupling variants and line items in the cart and order workflows.&lt;/p&gt;
&lt;p&gt;Our core API doesn't support custom prices out of the box, however the underlying &lt;code&gt;addToCartWorkflow&lt;/code&gt; does. &lt;/p&gt;
&lt;p&gt;Here's an example of how to use it in a custom API Route:
```ts
// POST /store/carts/:id/custom-line-items
import { addToCartWorkflow } from "@medusajs/medusa/core-flows"&lt;/p&gt;
&lt;p&gt;async function thirdPartyCallToComputePrice(item: any) {
  return {
    ...item,
    unit_price: Math.floor(Math.random() * 900) + 100,
  }
}&lt;/p&gt;
&lt;p&gt;export const POST = async (req, res) =&amp;gt; {
  const { id } = req.params
  const { items } = req.body&lt;/p&gt;
&lt;p&gt;const query = req.scope.resolve("query")&lt;/p&gt;
&lt;p&gt;const itemsWithDynamicPrice = await Promise.all(
    items.map((item) =&amp;gt; {
      return thirdPartyCallToComputePrice(item)
    })
  )&lt;/p&gt;
&lt;p&gt;const workflowInput = {
    items: itemsWithDynamicPrice,
    cart_id: id,
  }&lt;/p&gt;
&lt;p&gt;await addToCartWorkflow(req.scope).run({
    input: workflowInput,
  })&lt;/p&gt;
&lt;p&gt;const updatedCart = await query.graph({
    entity: "cart",
    filters: { id },
    fields: ["id", "items.*"],
  })&lt;/p&gt;
&lt;p&gt;res.status(200).json({ cart: updatedCart })
}
```&lt;/p&gt;
&lt;h3&gt;Nesting Admin UI Routes under existing domains&lt;/h3&gt;
&lt;p&gt;This release introduces support for nesting a UI Route under an existing domain in the sidebar instead of in the extensions section. &lt;/p&gt;
&lt;p&gt;For example, you can locate Brands under Products:
```tsx title="src/admin/routes/products/brands/page.tsx"
 import { defineRouteConfig } from "@medusajs/admin-sdk"
 import { Container, Heading } from "@medusajs/ui"&lt;/p&gt;
&lt;p&gt;const NestedProductsPage = () =&amp;gt; {
   return (
     &lt;Container className="divide-y p-0"&gt;
       &lt;div className="flex items-center justify-between px-6 py-4"&gt;
         &lt;Heading level="h1"&gt;Nested Products Page&lt;/Heading&gt;
       &lt;/div&gt;
     &lt;/Container&gt;
   )
 }&lt;/p&gt;
&lt;p&gt;export const config = defineRouteConfig({
   label: "Nested Products",
   nested: "/products",
 })&lt;/p&gt;
&lt;p&gt;export default NestedProductsPage
 ```&lt;/p&gt;
&lt;p&gt;This improvement to our existing UI Routes tooling was a community contribution from @eugenepro2. &lt;/p&gt;
&lt;h2&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;feat(core-flows,dashboard,js-sdk,medusa,types): support Fulfillment Options by @fPolic in https://github.com/medusajs/medusa/pull/10622&lt;/li&gt;
&lt;li&gt;feat: Custom line items by @olivermrbl in https://github.com/medusajs/medusa/pull/10408&lt;/li&gt;
&lt;li&gt;feat(order, types): Add Credit Line to order module by @riqwan in https://github.com/medusajs/medusa/pull/10636&lt;/li&gt;
&lt;li&gt;feat(core-flows): pass fields variant details when creating fulfillment by @fPolic in https://github.com/medusajs/medusa/pull/10665&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Bugs&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;fix(core-flows): export getItemTaxLinesStep by @shahednasser in https://github.com/medusajs/medusa/pull/10640&lt;/li&gt;
&lt;li&gt;fix(medusa): Missing metadata field on order by @olivermrbl in https://github.com/medusajs/medusa/pull/10651&lt;/li&gt;
&lt;li&gt;fix(dashboard): order details status by @fPolic in https://github.com/medusajs/medusa/pull/10650&lt;/li&gt;
&lt;li&gt;fix(notification): Only use enabled providers for notis by @olivermrbl in https://github.com/medusajs/medusa/pull/10659&lt;/li&gt;
&lt;li&gt;fix(core-flows): use useQueryGraphStep instead of useQueryStep by @shahednasser in https://github.com/medusajs/medusa/pull/10643&lt;/li&gt;
&lt;li&gt;fix(core-flows): data passed to to fulfillment provider context by @fPolic in https://github.com/medusajs/medusa/pull/10660&lt;/li&gt;
&lt;li&gt;fix(core-flows): refresh payment collections upon shipping changes by @riqwan in https://github.com/medusajs/medusa/pull/10673&lt;/li&gt;
&lt;li&gt;fix(product): updating collections with products fix by @riqwan in https://github.com/medusajs/medusa/pull/10668&lt;/li&gt;
&lt;li&gt;fix(core-flows): select stock locations for reservation from correct SC by @fPolic in https://github.com/medusajs/medusa/pull/10661&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Documentation&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;docs: document float property (for v2.1.2) by @shahednasser in https://github.com/medusajs/medusa/pull/10575&lt;/li&gt;
&lt;li&gt;docs-util: infer resolved resources in workflow + steps by @shahednasser in https://github.com/medusajs/medusa/pull/10637&lt;/li&gt;
&lt;li&gt;docs: generate references manually for v2.1.2 by @shahednasser in https://github.com/medusajs/medusa/pull/10639&lt;/li&gt;
&lt;li&gt;chore: fix redocly circular dependencies by @shahednasser in https://github.com/medusajs/medusa/pull/10642&lt;/li&gt;
&lt;li&gt;docs: add tags package to generate tags by @shahednasser in https://github.com/medusajs/medusa/pull/10666&lt;/li&gt;
&lt;li&gt;docs: support generating sidebar items with tags by @shahednasser in https://github.com/medusajs/medusa/pull/10672&lt;/li&gt;
&lt;li&gt;docs: add tags manually to doc pages by @shahednasser in https://github.com/medusajs/medusa/pull/10675&lt;/li&gt;
&lt;li&gt;docs: remove duplicate parsed tag items by @shahednasser in https://github.com/medusajs/medusa/pull/10676&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Chores&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;chore(types): Keep intelisense while being more loosen by @adrien2p in https://github.com/medusajs/medusa/pull/10657&lt;/li&gt;
&lt;li&gt;chore: improve tsdocs of fulfillment provider by @shahednasser in https://github.com/medusajs/medusa/pull/10649&lt;/li&gt;
&lt;li&gt;chore(fulfillment, utils): Migrate module to DML by @adrien2p in https://github.com/medusajs/medusa/pull/10617&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Other Changes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Add FilterableRefundReason filter by description and label by @vethan in https://github.com/medusajs/medusa/pull/10606&lt;/li&gt;
&lt;li&gt;feat(dashboard): ability to locate new admin route under existing route by @eugenepro2 in https://github.com/medusajs/medusa/pull/10587&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;New Contributors&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;@vethan made their first contribution in https://github.com/medusajs/medusa/pull/10606&lt;/li&gt;
&lt;li&gt;@eugenepro2 made their first contribution in https://github.com/medusajs/medusa/pull/10587&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Full Changelog&lt;/strong&gt;: https://github.com/medusajs/medusa/compare/v2.1.2...v2.1.3&lt;/p&gt;</content>
    <link href="https://github.com/medusajs/medusa/releases/tag/v2.1.3" rel="alternate"/>
  </entry>
</feed>
